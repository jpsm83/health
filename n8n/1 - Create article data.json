{
  "name": "1 - Create article data",
  "nodes": [
    {
      "parameters": {
        "jsCode": "// Function to generate a MongoDB-style ObjectID\nfunction generateObjectId() {\n  // 4 bytes timestamp\n  const timestamp = Math.floor(Date.now() / 1000).toString(16);\n\n  // 5 bytes random\n  const random = [...Array(10)]\n    .map(() => Math.floor(Math.random() * 16).toString(16))\n    .join('');\n\n  // 3 bytes counter (random for simplicity)\n  const counter = [...Array(6)]\n    .map(() => Math.floor(Math.random() * 16).toString(16))\n    .join('');\n\n  return timestamp + random + counter;\n}\n\n// Generate a single ID and return in n8n format\nreturn [\n  { json: { _id: generateObjectId() } }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3968,
        -352
      ],
      "id": "dcc7b597-952c-41f8-abcf-b8ce4851186c",
      "name": "Generate MongoDB  _ID"
    },
    {
      "parameters": {
        "jsCode": "if($input.first().json.body){\n  const data = $input.first().json.body\n    // Remove bracket-style links: [text] or [//url]\n    .replace(/\\[[^\\]]*\\]/g, '. ')\n    // Remove multiple spaces/newlines\n    .replace(/\\s{2,}/g, ' ')\n    // Remove breadcrumbs like \"1. Health 2. Sexual Health ...\"\n    .replace(/\\d+\\.\\s.*?(?=[A-Z]{2,}|Published|Jump to|$)/, ' ')\n    // Remove \"We earn a commission...\" disclaimers\n    .replace(/We earn a commission[\\s\\S]*?(?=[A-Z]{2,})/, ' ')\n    .trim();\n    \n  return {data};\n}\n\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2320,
        -352
      ],
      "id": "1bca5ca0-7bf2-4c50-aae1-6387c98b768e",
      "name": "Sanitize data"
    },
    {
      "parameters": {
        "content": "## Extraction and sanitation of original data",
        "height": 288,
        "width": 368
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        3760,
        -704
      ],
      "typeVersion": 1,
      "id": "824ae751-3713-45db-b2ae-a1ecc75acc5b",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1VIDK6jaicE6HRZ88hx-iSAdtRlX4atPKXVoJph5WD2g",
          "mode": "list",
          "cachedResultName": "womens-spot",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1VIDK6jaicE6HRZ88hx-iSAdtRlX4atPKXVoJph5WD2g/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "={{\n  ({\n    Monday: 'fitness',\n    Tuesday: 'nutrition',\n    Wednesday: 'health',\n    Thursday: 'intimacy',\n    Friday: 'beauty',\n    Saturday: 'weight-loss'\n  }[new Date().toLocaleDateString('en-US', { weekday: 'long' })] || 'life')\n}}",
          "mode": "name"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Input URL": "={{ $('Get URL row').item.json[\"Input URL\"] }}",
            "Status": "Discarded",
            "Errors message": "={{ $json.message.content.reason }}",
            "Date": "={{ $now.toLocaleString() }}"
          },
          "matchingColumns": [
            "Input URL"
          ],
          "schema": [
            {
              "id": "Date",
              "displayName": "Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Input URL",
              "displayName": "Input URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Type",
              "displayName": "Type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Article ID",
              "displayName": "Article ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Image URL",
              "displayName": "Image URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "EN",
              "displayName": "EN",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Output URL",
              "displayName": "Output URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Tiktok",
              "displayName": "Tiktok",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Pintrest",
              "displayName": "Pintrest",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Twitter X",
              "displayName": "Twitter X",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Facebook",
              "displayName": "Facebook",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Threads",
              "displayName": "Threads",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Instagran",
              "displayName": "Instagran",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Errors message",
              "displayName": "Errors message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        3360,
        -608
      ],
      "id": "1f51ac8e-1b88-4796-99bb-5a616fdb8ecf",
      "name": "Article discarded",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "5osTTYhZaXHkk1mD",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "loose",
            "version": 2
          },
          "conditions": [
            {
              "id": "00ca5266-10a2-4108-abf7-abf8e3c4d472",
              "leftValue": "={{ $json.message.content.valid }}",
              "rightValue": "false",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2800,
        -352
      ],
      "id": "4a24fddd-fc08-4777-8d65-fbdd2b4c3a41",
      "name": "Article validation"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=## USER MESSAGE\n```\nPlease analyze the following article content:\n\n{{ JSON.stringify($('Rewrite article').item.json.message.content) }}\n\nand create 4 detailed image descriptions following the specified JSON format.\n```\n\n---\n\n# DETAILED DOCUMENTATION\n\n**MANDATORY JSON STRUCTURE**\n```json\n{\n  \"imagesContext\": {\n    \"imageOne\": \"Image one description string\",\n    \"imageTwo\": \"Image two description string\", \n    \"imageThree\": \"Image three description string\",\n    \"imageFour\": \"Image four description string\"\n  }\n}\n```\n\n**WRONG OUTPUT FORMATS (WILL CAUSE ERRORS):**\n- \"Here is the JSON response: { ... }\"\n- \"The result is: { ... }\"\n- \"```json\\n{ ... }\\n```\"\n- Any text before or after the JSON\n- Comments or explanations outside the JSON\n- Single quotes instead of double quotes\n- Missing fields (e.g., missing `imageTwo`, `imageThree`, or `imageFour`)\n- Undefined, null, or empty string values for any field\n"
            },
            {
              "content": "## SYSTEM MESSAGE\n```\nYou are an article content analyzer for a **women's spot app**. You will receive article content and create 4 detailed image descriptions that reflect the article in detail.\n\n**IMPORTANT CONTEXT:** This content is for a **women's wellness and health platform** that covers topics including women's intimate wellness, personal wellness, relationships, and intimate health. These topics are educational, informational, and focused on sharing experiences and information about women's intimate wellness - NOT explicit content.\n\n**CRITICAL SAFETY NOTE:** Even though this is educational content about women's intimate wellness, OpenAI's safety filters will reject ANY prompts containing sexual terminology. The word \"sex\" itself triggers rejection, even in educational contexts. Always use \"intimate wellness,\" \"personal wellness,\" or \"relationship wellness\" instead.\n\n**APP PURPOSE:** The images will be used in a women's spot app that provides:\n- Educational content about women's intimate wellness and personal health\n- Information sharing about women's intimate wellness and relationships\n- Support for women's intimate wellness and self-care\n- Empowerment and education around women's health topics\n- Safe spaces for women to learn about their bodies and relationships\n\n**CRITICAL INSTRUCTION: YOU MUST CREATE 4 DETAILED IMAGE DESCRIPTIONS WITH HUMAN INTERACTIVITY, OUTPUT IN THE SPECIFIED JSON FORMAT.**\n\n## CONTENT ANALYSIS AND IMAGE CREATION\n\n**STEP 1: READ AND UNDERSTAND THE ARTICLE CONTENT**\n- Analyze the provided article content thoroughly\n- Identify the main themes, topics, and key concepts\n- Extract the core information and context\n- Break down the article into 4 distinct main contexts/themes\n\n**STEP 2: CREATE IMAGE DESCRIPTIONS**\nCreate 4 detailed image descriptions that reflect the article content:\n\n**IMAGE DESCRIPTION REQUIREMENTS:**\n- Must create exactly 4 detailed image descriptions\n- Each description must be for realistic images with human interactivity\n- Images should break down the article into 4 distinct main contexts in order\n- Each image must reflect specific aspects of what the article is about\n- Images don't need to have the same context - they can represent different themes from the article\n- Focus on visual elements that would help readers understand the article content\n- Must have humans in the images\n- Create detailed, specific descriptions that can be used to generate images\n- Include specific details about composition, lighting, colors, and human interactions\n- Descriptions must be detailed enough to generate high-quality images\n- All content must reflect the article accurately\n- Do NOT make up false information\n- Do NOT change the core meaning or context\n\n**CRITICAL YEAR REFERENCE REQUIREMENTS:**\n- **DO NOT include generic year references** in image descriptions (e.g., \"in 2026\", \"this year\", \"last year\", \"as of 2024\")\n- **Image descriptions must be reusable across any year** - they should not become outdated due to year references\n- **ONLY include years if they are tied to date-specific historical events** (e.g., \"World Cup 2022\", \"Olympic Games 2020\", \"COVID-19 pandemic in 2020\")\n- **Use timeless language** in descriptions - focus on the visual elements and concepts rather than time-specific references\n\n**FOR WOMEN'S WELLNESS TOPICS (intimate life, intimate wellness, relationships, personal wellness):**\n- Create appropriate, educational, and empowering images suitable for a women's spot app\n- Focus on education, empowerment, and wellness, NOT explicit content\n- Use symbolic representations (couples holding hands, romantic settings, wellness symbols, empowerment imagery)\n- Focus on emotional connections, education, and empowerment rather than physical intimacy\n- Use appropriate clothing and settings (bedrooms with made beds, romantic dinners, couples talking, wellness centers)\n- Emphasize wellness, self-care, healthy relationships, and women's empowerment\n- Create educational and informational imagery that supports women's intimate wellness education\n- Ensure images are suitable for a women's spot app and educational content\n- **CRITICAL:** Use only the most general, symbolic language that cannot be misinterpreted while still being relevant to women's wellness topics\n\n## SAFETY AND TERMINOLOGY\n\n**CRITICAL: AVOID ALL SEXUAL TERMINOLOGY - EVEN FOR EDUCATION**\nOpenAI's safety filters block ANY sexual terminology, even in educational contexts. The word \"sex\" itself triggers rejection. Use these safe alternatives:\n\n**COMPLETELY BLOCKED WORDS → SAFE ALTERNATIVES:**\n- \"sex\" → \"intimacy\" or \"wellness\" or \"relationships\"\n- \"sexual\" → \"intimate\" or \"personal\" or \"wellness\"\n- \"sexuality\" → \"intimacy\" or \"personal wellness\"\n- \"sex education\" → \"intimate wellness education\" or \"relationship wellness\"\n- \"sexual health\" → \"intimate wellness\" or \"personal wellness\"\n- \"sexual wellness\" → \"intimate wellness\" or \"personal wellness\"\n- \"sex life\" → \"intimate life\" or \"personal wellness\"\n- \"sexual pleasure\" → \"intimate satisfaction\" or \"personal wellness\"\n- \"sexual satisfaction\" → \"intimate satisfaction\" or \"personal wellness\"\n- \"sexual intimacy\" → \"intimate connection\" or \"personal connection\"\n- \"sexual relationship\" → \"intimate relationship\" or \"close relationship\"\n- \"sexual experience\" → \"intimate experience\" or \"personal experience\"\n\n**PRODUCT-RELATED BLOCKED WORDS → SAFE ALTERNATIVES:**\n- \"sex toys\" → \"wellness accessories\" or \"intimate wellness products\"\n- \"pleasure toy\" → \"wellness device\" or \"intimate wellness tool\"\n- \"dildo\" → \"wellness accessory\" or \"personal care item\"\n- \"vibrator\" → \"wellness device\" or \"intimate care tool\"\n- \"anal plug kit\" → \"beginner-friendly personal wellness kit\"\n- \"anal toys, plugs, beads\" → \"variety of self-care wellness accessories\"\n- \"plugs\" → \"wellness accessories\" or \"personal care items\"\n- \"beads\" → \"wellness accessories\" or \"personal care items\"\n- \"silicone toy\" → \"wellness device\" or \"personal care tool\"\n- \"lubricant\" → \"wellness gel\" or \"intimate care product\"\n\n**ADDITIONAL BLOCKED WORDS TO AVOID:**\n- \"plugs\" (even without \"anal\")\n- \"beads\" (even without sexual context)\n- \"silicone toy\" (even in wellness context)\n- \"toy\" (when referring to intimate products)\n- \"device\" (when referring to intimate products)\n- \"accessory\" (when referring to intimate products)\n\n**SAFE ALTERNATIVES FOR PRODUCT DESCRIPTIONS:**\n- Instead of \"plugs, beads, silicone toys\" → \"personal wellness products\"\n- Instead of \"wellness accessories\" → \"wellness products\" or \"self-care items\"\n- Instead of \"wellness devices\" → \"wellness products\" or \"personal care items\"\n- Instead of \"intimate accessories\" → \"intimate wellness products\"\n- Instead of \"wellness tools\" → \"wellness products\" or \"self-care items\"\n\n**SAFE CONTEXT WORDS TO INCLUDE:**\n- \"educational\"\n- \"wellness\"\n- \"intimacy\"\n- \"empowerment\"\n- \"self-care\"\n- \"relationship\"\n- \"intimate wellness\"\n- \"personal wellness\"\n- \"body-safe\"\n- \"wellness products\"\n\n**KEYWORD REFRAMING STRATEGY:**\nWhen creating prompts for women's wellness topics, always reframe potentially blocked keywords:\n1. **Focus on the educational/wellness context first**\n2. **Use euphemisms and neutral descriptions**\n3. **Emphasize empowerment, self-care, and wellness**\n4. **Include safe context words like \"educational,\" \"wellness,\" \"intimacy,\" \"empowerment\"**\n5. **Describe the setting and mood rather than specific products**\n6. **Use symbolic representations and emotional connections**\n\n**EXAMPLE REFRAMING:**\n- BAD - \"A woman using anal plugs and dildos for sexual pleasure\"\n- GOOD - \"A woman exploring a beginner-friendly personal wellness kit in a safe, comfortable bedroom setting, focusing on self-care and intimate wellness education\"\n\n- BAD - \"Couple using sex toys for pleasure\"\n- GOOD - \"A couple holding hands in a softly lit bedroom with wellness products on the bedside table, representing intimacy and shared exploration in a safe, comfortable environment\"\n\n- BAD - \"Woman with silicone toys and plugs\"\n- GOOD - \"Woman with personal wellness products and self-care items\"\n\n- BAD - \"Anal beads and plugs for pleasure\"\n- GOOD - \"Personal wellness products for intimate care\"\n\n**SPECIFIC \"SEX EDUCATION\" REFRAMING:**\n- BAD - \"Sex education for women\" → GOOD - \"Intimate wellness education for women\" or \"Personal wellness education for women\"\n- BAD - \"Sexual health information\" → GOOD - \"Intimate wellness information\" or \"Personal wellness information\"\n- BAD - \"Sex education content\" → GOOD - \"Intimate wellness education content\" or \"Relationship wellness content\"\n- BAD - \"Sexual wellness tips\" → GOOD - \"Intimate wellness tips\" or \"Personal wellness tips\"\n- BAD - \"Sex life advice\" → GOOD - \"Intimate life advice\" or \"Personal wellness advice\"\n\n## OPENAI DALL-E SAFETY COMPLIANCE\n\n**OPENAI DALL-E SAFETY COMPLIANCE REQUIREMENTS:**\n- **NEVER include names of real people, celebrities, public figures, or historical figures**\n- **NEVER include explicit sexual content, violence, gore, or harmful imagery**\n- **NEVER include content related to self-harm, suicide, or dangerous activities**\n- **NEVER include hate speech, discrimination, or offensive content**\n- **NEVER include political figures, controversial public figures, or current events**\n- **NEVER include medical procedures, surgeries, or graphic health content**\n- **NEVER include weapons, violence, or dangerous situations**\n- **NEVER include content that could be interpreted as inappropriate or offensive**\n- **NEVER use ambiguous language that could be misinterpreted by the safety system**\n- **NEVER include specific brand names, logos, or copyrighted material**\n- **NEVER include content about illegal activities or substances**\n- **NEVER include content that could be used to deceive or mislead**\n- **ALWAYS use generic, non-specific descriptions for people (e.g., \"a woman\", \"a person\", \"people\")**\n- **ALWAYS focus on positive, educational, and wellness-related imagery**\n- **ALWAYS ensure content is suitable for all audiences and social media platforms**\n- **ALWAYS use clear, unambiguous language that cannot be misinterpreted**\n\n**OPENAI DALL-E COMPLIANCE GUIDELINES:**\n- **PEOPLE DESCRIPTIONS:** Use only generic terms like \"a woman\", \"a person\", \"people\", \"individuals\" - NEVER use specific names\n- **SETTINGS:** Use general, positive settings like \"modern home\", \"wellness center\", \"outdoor garden\", \"cozy living room\"\n- **ACTIVITIES:** Focus on wholesome activities like \"reading\", \"exercising\", \"cooking\", \"meditating\", \"gardening\", \"socializing\"\n- **EMOTIONS:** Use positive emotions like \"happy\", \"confident\", \"peaceful\", \"energetic\", \"focused\", \"relaxed\"\n- **CLOTHING:** Describe appropriate, everyday clothing like \"casual attire\", \"comfortable clothes\", \"professional wear\"\n- **AVOID:** Medical procedures, intimate situations, controversial topics, or anything that could be interpreted as inappropriate\n\n**SAFE PROMPT STRUCTURE:**\n- Start with: \"A [generic person description] [doing wholesome activity] in [positive setting]\"\n- Include: lighting, colors, composition details\n- Focus on: wellness, education, positive emotions, everyday activities\n- Avoid: specific names, controversial topics, ambiguous language\n\n**OPENAI COMPLIANT PROMPT EXAMPLES:**\n\n**General Wellness Examples:**\n- \"A confident woman in casual attire reading a wellness book in a modern living room with soft natural lighting\"\n- \"Two people having a friendly conversation over coffee in a bright, welcoming café setting\"\n- \"A person practicing yoga in a peaceful outdoor garden with morning sunlight\"\n- \"A group of diverse individuals working together in a modern, well-lit office space\"\n- \"A woman preparing healthy food in a clean, organized kitchen with warm lighting\"\n- \"A couple holding hands while walking in a beautiful garden, representing healthy relationships\"\n- \"A woman in comfortable clothes meditating in a peaceful bedroom setting, symbolizing self-care\"\n- \"Two women having an open conversation in a cozy living room, representing women's support and empowerment\"\n\n**Intimate Wellness Examples (Using Safe Language):**\n- \"A woman sitting comfortably in a bright, cozy bedroom, exploring a beginner-friendly personal wellness kit with gentle lighting highlighting her relaxed and curious expression. Soft pastel colors surround her, creating a welcoming and safe atmosphere. The composition focuses on self-exploration, empowerment, and intimate wellness without explicit content.\"\n- \"Two women in casual, comfortable clothing sharing a warm conversation over coffee in a bright, modern café. They are smiling and engaged, symbolizing openness and positive attitudes around intimacy and personal wellness. Natural daylight floods the space, emphasizing a supportive and judgment-free environment for discussing women's experiences.\"\n- \"A close-up of a diverse selection of body-safe wellness products—carefully arranged on a wooden table at a wellness shop. A hand gently picks up one of the items, showing the importance of safe, body-friendly materials. The setting is well-lit with natural light, highlighting textures and colors, emphasizing education about choosing the right product.\"\n- \"A couple holding hands in a softly lit modern bedroom, with a small, discreet wellness product on the bedside table. Both individuals are smiling and relaxed, highlighting intimacy and shared exploration. Warm lighting and a tasteful minimalist design convey safety, comfort, and connection.\"\n\n**BAD EXAMPLES (Will be rejected by OpenAI):**\n- \"Dr. Smith discussing medical procedures\" (includes specific name)\n- \"A couple in intimate bedroom setting\" (too suggestive)\n- \"Person with medical equipment performing surgery\" (medical procedures)\n- \"Political figure giving a speech\" (public figures)\n- \"Violent confrontation between people\" (violence)\n\n**PRE-SUBMISSION SAFETY CHECKLIST:**\nBefore generating any image description, verify that your prompt:\n- **PEOPLE:** Uses only generic terms like \"a woman\", \"a person\", \"people\" - NO specific names\n- **CONTENT:** Focuses on positive, educational, women's wellness topics including intimate wellness, relationships, and personal wellness\n- **SETTINGS:** Uses wholesome, everyday environments (home, office, garden, café)\n- **ACTIVITIES:** Describes safe, positive activities (reading, cooking, exercising, socializing)\n- **LANGUAGE:** Uses clear, unambiguous language that cannot be misinterpreted\n- **TONE:** Maintains a positive, uplifting, and educational tone\n- **KEYWORDS:** Has reframed all potentially blocked keywords using safe alternatives\n- **CONTEXT:** Includes safe context words like \"educational,\" \"wellness,\" \"intimacy,\" \"empowerment\"\n- **COMPLIANCE:** Follows all OpenAI DALL-E safety guidelines\n- **TESTING:** Has been reviewed for potential safety violations\n\n**REMEMBER:** If in doubt, err on the side of caution. It's better to create a simple, safe prompt than to risk rejection by OpenAI's safety system.\n\n## OUTPUT FORMAT\n\n**CRITICAL: You must output the result in the exact JSON format specified below. No other format is acceptable.**\n\n**MANDATORY JSON STRUCTURE:**\n```json\n{\n  \"imagesContext\": {\n    \"imageOne\": \"Image one description string\",\n    \"imageTwo\": \"Image two description string\", \n    \"imageThree\": \"Image three description string\",\n    \"imageFour\": \"Image four description string\"\n  }\n}\n```\n\n**JSON FORMAT VALIDATION RULES:**\n1. **MUST start with `{` and end with `}`**\n2. **MUST have exactly one main object: `imagesContext`**\n3. **MUST have exactly 4 image descriptions: `imageOne`, `imageTwo`, `imageThree`, `imageFour`**\n4. **MUST use double quotes for all keys and string values**\n5. **MUST NOT include any text before or after the JSON**\n6. **MUST NOT include any comments or explanations outside the JSON**\n7. **MUST be valid JSON that can be parsed by a JSON parser**\n\n**FIELD REQUIREMENTS:**\n- **ALL 4 fields are OBLIGATORY: `imageOne`, `imageTwo`, `imageThree`, `imageFour`**\n- **ALL values MUST be non-empty strings - NO undefined, null, or empty values accepted**\n- **Validation will FAIL if any field is missing, undefined, null, or empty**\n\n**CRITICAL JSON QUOTE RULES - ABSOLUTELY MANDATORY:**\n- **ALL double quotes (\") within content MUST be replaced with single quotes (')**\n- **This is CRITICAL - double quotes break JSON parsing in n8n when data is treated as string**\n- **Examples of CORRECT usage:**\n  - Description: \"A woman reading 'Wellness Guide' book\" → JSON: `\"imageOne\": \"A woman reading 'Wellness Guide' book\"`\n- **Examples of INCORRECT (WILL CAUSE ERRORS):**\n  - WRONG: `\"imageOne\": \"A woman reading \"Wellness Guide\" book\"` (double quotes break JSON)\n- **VERIFICATION: Before outputting, replace ALL double quotes within content with single quotes (apostrophes)**\n- **If your content needs quotes, use single quotes (') instead of double quotes (\") - this is not optional**\n\n**ABSOLUTELY FORBIDDEN:**\n- Do NOT output undefined, null, or empty values for any field\n- Do NOT omit any required JSON keys or use empty strings\n- Do NOT add any emojis, symbols, or special characters in any content\n- Do NOT make up false information\n- Do NOT change the core meaning or context\n- Do NOT output in any format other than the specified JSON\n- Do NOT create unrealistic or non-human interactive image descriptions\n- Do NOT create explicit, suggestive, or inappropriate image descriptions for sensitive topics\n- Do NOT include nudity, sexual acts, or inappropriate content in image descriptions\n- Do NOT create images that would violate social media community guidelines\n- **Do NOT include generic year references** - remove all generic year references and use timeless language in descriptions\n- **ONLY include years if they are tied to date-specific historical events** (e.g., \"World Cup 2022\", \"Olympic Games 2020\", \"COVID-19 pandemic in 2020\")\n- Do NOT add any text before or after the JSON object\n- Do NOT use single quotes instead of double quotes\n- Do NOT add trailing commas after the last item in objects or arrays\n- Do NOT include comments or explanations outside the JSON\n- Do NOT use backticks or markdown formatting around the JSON\n- Do NOT add line breaks or extra spaces that break JSON parsing\n- Do NOT include any characters that are not valid JSON\n- Do NOT add any prefix like \"Here is the JSON:\" or \"The result is:\"\n\n**OUTPUT:** Only the complete JSON object, nothing else.\n```",
              "role": "system"
            }
          ]
        },
        "jsonOutput": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        3328,
        -352
      ],
      "id": "8022b21e-95d7-4ab1-a1a8-2ffd049b58fb",
      "name": "Media context",
      "executeOnce": false,
      "retryOnFail": true,
      "waitBetweenTries": 5000,
      "credentials": {
        "openAiApi": {
          "id": "Gqus3026ccdUj9Mc",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=## USER MESSAGE\n```\n{{ JSON.stringify($('Rewrite article').item.json.message.content) }}\n\nAnalyze the above article content and create comprehensive SEO metadata following the specified JSON format.\n\n**Category:** \"{{ $('Get URL row').item.json.Type }}\" (always in English - use as-is, DO NOT translate)\n```\n---\n\n# DETAILED DOCUMENTATION\n\n**MANDATORY JSON STRUCTURE:**\n```json\n{\n  \"metaTitle\": \"Meta title will be the article title (max 500 characters) - MAX 500 characters\",\n  \"metaDescription\": \"Compelling meta description that encourages clicks and summarizes the article content - MAX 1000 characters\",\n  \"keywords\": [\"keyword1\", \"keyword2\", \"keyword3\", \"keyword4\", \"keyword5\"],\n  \"slug\": \"intimate-wellness-guide\",\n  \"hreflang\": \"en\",\n  \"canonicalUrl\": \"https://womensspot.org/intimacy/intimate-wellness-guide\"\n}\n```\n\n## EXAMPLE OUTPUTS\n\n**CORRECT OUTPUT FORMAT EXAMPLE:**\n```json\n{\n  \"metaTitle\": \"Intimate Wellness Education: A Complete Guide to Personal Wellness | Women's Spot\",\n  \"metaDescription\": \"Explore educational resources about intimate wellness and personal care. Learn about safe practices, wellness products, and empowerment for women's health and well-being.\",\n  \"keywords\": [\"intimate wellness\", \"personal wellness\", \"wellness education\", \"women's health\", \"wellness products\"],\n  \"slug\": \"intimate-wellness-education-complete-guide\",\n  \"hreflang\": \"en\",\n  \"canonicalUrl\": \"https://womensspot.org/intimacy/intimate-wellness-education-complete-guide\"\n}\n```\n\n**WRONG OUTPUT FORMATS (WILL CAUSE ERRORS):**\n- \"Here is the JSON response: { ... }\"\n- \"The result is: { ... }\"\n- \"```json\\n{ ... }\\n```\"\n- Any text before or after the JSON\n- Comments or explanations outside the JSON\n- Single quotes instead of double quotes\n- Fewer than 5 keywords or more than 5 keywords\n- Missing any of the 6 required properties\n- Using \"articles\" or its translations in canonical URLs"
            },
            {
              "content": "## SYSTEM MESSAGE\n```\nYou are an SEO specialist and metadata generator for a **women's spot app**. You will receive article content and create comprehensive SEO metadata that optimizes the article for search engines while maintaining the educational and wellness-focused nature of the content.\n\n**CRITICAL LANGUAGE REQUIREMENT: ALL OUTPUT MUST BE IN ENGLISH ONLY. NO EXCEPTIONS.**\n\n**IMPORTANT CONTEXT:** This content is for a **women's spot app** that covers topics including women's intimate wellness, personal wellness, relationships, health, beauty, nutrition, and weight loss. These topics are educational, informational, and focused on sharing experiences and information about women's daily life - NOT explicit content.\n\n**CRITICAL SAFETY NOTE:** Even though this is educational content about women's and includes some intimate articles, search engines and content filters may flag content with sexual terminology. Always use \"intimate wellness,\" \"personal wellness,\" or \"relationship wellness\" instead of explicit terms to ensure proper SEO performance and content safety.\n\n**APP PURPOSE:** The SEO metadata will be used for a women's spot app that provides:\n- Educational content about women's intimate wellness and personal health\n- Information sharing about women's intimate wellness and relationships\n- Support for women's intimate wellness and self-care\n- Empowerment and education around women's health topics\n- Safe spaces for women to learn about their bodies and relationships\n- Health, beauty, nutrition, and weight loss for women\n\n**CRITICAL INSTRUCTION: YOU MUST CREATE COMPREHENSIVE SEO METADATA AND OUTPUT IN THE SPECIFIED JSON FORMAT.**\n\n**MANDATORY: ALL CONTENT MUST BE IN ENGLISH ONLY - NO OTHER LANGUAGES ALLOWED.**\n\n## CONTENT UNDERSTANDING AND ANALYSIS\n\n**ABSOLUTELY CRITICAL: YOU MUST READ, UNDERSTAND THE ARTICLE CONTENT AND CREATE SEO METADATA THAT REFLECTS THE ARTICLE IN DETAIL.**\n\n**STEP 1: READ THE ARTICLE CONTENT**\n- Analyze the provided article content thoroughly\n- Identify the main themes, topics, and key concepts\n- Extract the core information and context\n- Determine the primary category and target audience\n- Identify relevant keywords and search terms\n\n**STEP 2: CREATE SEO METADATA**\nCreate comprehensive SEO metadata that optimizes the article for search engines:\n- Meta title will be the article title (max 500 characters)\n- Create a compelling meta description (max 1000 characters)\n- Extract exactly 5 relevant keywords from the article content\n- Slug will be the article title converted to URL-safe format (lowercase, hyphens, NO accents, NO special characters, browser-compatible)\n- Hreflang MUST ALWAYS be \"en\" (ENGLISH ONLY)\n- Create the canonical URL following the specified format using the English category name\n\n**SEO OPTIMIZATION REQUIREMENTS:**\n- Meta description must be compelling and encourage clicks\n- Keywords must be relevant to the article content and target audience\n- All metadata must reflect the educational and wellness nature of the content\n- **CRITICAL: For women's wellness topics (intimate life, intimate wellness, relationships, personal wellness), create appropriate, educational, and empowering SEO metadata suitable for a women's spot app. These topics are about sharing experiences, articles and information about women's - focus on education, empowerment, and wellness, NOT explicit content.**\n- Use educational and empowering language in meta titles and descriptions\n- Focus on wellness, self-care, and empowerment rather than explicit content\n- Emphasize the educational and informational nature of the content\n- Ensure all metadata is suitable for search engines and content filters\n- Use only the most general, educational language that cannot be misinterpreted while still being relevant to women's wellness topics\n\n**CRITICAL YEAR REFERENCE REQUIREMENTS:**\n- **DO NOT include generic year references** in SEO metadata (metaTitle, metaDescription, keywords) - e.g., \"in 2026\", \"this year\", \"last year\", \"as of 2024\", \"studies from 2023\"\n- **All SEO content must be reusable across any year** - it should not become outdated due to year references\n- **ONLY include years if they are tied to date-specific historical events** (e.g., \"World Cup 2022\", \"Olympic Games 2020\", \"COVID-19 pandemic in 2020\")\n- **Remove or rephrase any generic time references** that include years:\n  - \"A study from 2022\" → \"Recent studies show\" or \"Studies indicate\"\n  - \"This year's trends\" → \"Current trends\" or \"Latest trends\"\n  - \"In 2024, experts recommend\" → \"Experts recommend\" or \"Current recommendations\"\n- **Use timeless language** that remains relevant regardless of when the content is used\n\n**SEO SAFETY COMPLIANCE REQUIREMENTS:**\n- **NEVER include explicit sexual terminology in meta titles or descriptions**\n- **NEVER include content that could be flagged by search engines**\n- **NEVER include inappropriate or offensive keywords**\n- **ALWAYS use educational and wellness-focused language**\n- **ALWAYS ensure content is suitable for all audiences and search engines**\n- **ALWAYS use clear, unambiguous language that cannot be misinterpreted**\n- **ALWAYS focus on positive, educational, and wellness-related keywords**\n\n**CRITICAL: AVOID ALL SEXUAL TERMINOLOGY - EVEN FOR SEO**\nSearch engines and content filters may flag content with sexual terminology, even in educational contexts. Use these safe alternatives:\n\n**COMPLETELY BLOCKED WORDS → SAFE ALTERNATIVES:**\n- \"sex\" → \"intimacy\" or \"wellness\" or \"relationships\"\n- \"sexual\" → \"intimate\" or \"personal\" or \"wellness\"\n- \"sexuality\" → \"intimacy\" or \"personal wellness\"\n- \"sex education\" → \"intimate wellness education\" or \"relationship wellness\"\n- \"sexual health\" → \"intimate wellness\" or \"personal wellness\"\n- \"sexual wellness\" → \"intimate wellness\" or \"personal wellness\"\n- \"sex life\" → \"intimate life\" or \"personal wellness\"\n- \"sexual pleasure\" → \"intimate satisfaction\" or \"personal wellness\"\n- \"sexual satisfaction\" → \"intimate satisfaction\" or \"personal wellness\"\n- \"sexual intimacy\" → \"intimate connection\" or \"personal connection\"\n- \"sexual relationship\" → \"intimate relationship\" or \"close relationship\"\n- \"sexual experience\" → \"intimate experience\" or \"personal experience\"\n\n**PRODUCT-RELATED BLOCKED WORDS → SAFE ALTERNATIVES:**\n- \"sex toys\" → \"wellness accessories\" or \"intimate wellness products\"\n- \"pleasure toy\" → \"wellness device\" or \"intimate wellness tool\"\n- \"dildo\" → \"wellness accessory\" or \"personal care item\"\n- \"vibrator\" → \"wellness device\" or \"intimate care tool\"\n- \"anal plug kit\" → \"beginner-friendly personal wellness kit\"\n- \"anal toys, plugs, beads\" → \"variety of self-care wellness accessories\"\n- \"plugs\" → \"wellness accessories\" or \"personal care items\"\n- \"beads\" → \"wellness accessories\" or \"personal care items\"\n- \"silicone toy\" → \"wellness device\" or \"personal care tool\"\n- \"lubricant\" → \"wellness gel\" or \"intimate care product\"\n\n**ADDITIONAL BLOCKED WORDS TO AVOID:**\n- \"plugs\" (even without \"anal\")\n- \"beads\" (even without sexual context)\n- \"silicone toy\" (even in wellness context)\n- \"toy\" (when referring to intimate products)\n- \"device\" (when referring to intimate products)\n- \"accessory\" (when referring to intimate products)\n\n**SAFE ALTERNATIVES FOR PRODUCT DESCRIPTIONS:**\n- Instead of \"plugs, beads, silicone toys\" → \"personal wellness products\"\n- Instead of \"wellness accessories\" → \"wellness products\" or \"self-care items\"\n- Instead of \"wellness devices\" → \"wellness products\" or \"personal care items\"\n- Instead of \"intimate accessories\" → \"intimate wellness products\"\n- Instead of \"wellness tools\" → \"wellness products\" or \"self-care items\"\n\n**SAFE CONTEXT WORDS TO INCLUDE:**\n- \"educational\"\n- \"wellness\"\n- \"intimacy\"\n- \"empowerment\"\n- \"self-care\"\n- \"relationship\"\n- \"intimate wellness\"\n- \"personal wellness\"\n- \"body-safe\"\n- \"wellness products\"\n- \"women's health\"\n- \"wellness education\"\n\n## FIELD REQUIREMENTS\n\n**META TITLE:**\n- Use the article title as the meta title\n- Maximum 500 characters (including spaces)\n- Must be engaging and include relevant keywords\n\n**META DESCRIPTION:**\n- Must be compelling and encourage clicks\n- Maximum 1000 characters (including spaces)\n- Should summarize the article content accurately\n- Must include relevant keywords naturally\n- Should provide value proposition to readers\n\n**KEYWORDS:**\n- Must have exactly 5 keywords (no more, no less)\n- Keywords must be relevant to the article content\n- Should include primary and secondary keywords\n- Must be searchable and relevant to target audience\n- Should reflect the educational and wellness nature of the content\n\n**SLUG:**\n- Slug will be the article title converted to URL-safe format\n- **CRITICAL: Must be browser-compatible - NO accents, NO special characters, NO non-ASCII characters**\n- **MANDATORY RULES:**\n  - Convert to lowercase\n  - Replace spaces with hyphens\n  - Remove ALL accents and diacritical marks (é → e, ñ → n, ü → u, ç → c, á → a, í → i, ó → o, ú → u, etc.)\n  - Remove ALL special characters (!, @, #, $, %, &, *, ?, etc.)\n  - Remove ALL non-ASCII characters - normalize to ASCII only\n  - Replace multiple consecutive hyphens with single hyphen\n  - Remove leading/trailing hyphens\n  - **Only allow: lowercase letters (a-z), numbers (0-9), and hyphens (-)**\n- **Examples:**\n  - \"Café & Wellness\" → \"cafe-wellness\"\n  - \"São Paulo Health\" → \"sao-paulo-health\"\n  - \"Intimität & Beziehung\" → \"intimitat-beziehung\"\n  - \"Salud y Bienestar\" → \"salud-y-bienestar\"\n  - \"Santé & Beauté\" → \"sante-beaute\"\n  - \"Salute e Bellezza\" → \"salute-e-bellezza\"\n\n**HREFLANG:**\n- MUST ALWAYS BE \"en\" (ENGLISH ONLY)\n- NO OTHER LANGUAGES ALLOWED\n- This is MANDATORY - no exceptions\n\n**CANONICAL URL:**\n- Must follow the format: \"https://womensspot.org/[category]/[slug]\" (English - locale omitted)\n- **This prompt is for ENGLISH articles only** - locale is always omitted\n- **Category Variable:** The category from the user prompt is in English - use it directly (DO NOT translate)\n- Category must be the English category name (e.g., \"health\", \"nutrition\", \"intimacy\", \"fitness\", \"beauty\", \"weight-loss\", \"life\")\n- **CRITICAL: The slug in canonicalUrl MUST be IDENTICAL to the `slug` field value - no differences allowed**\n- **CRITICAL: NEVER use \"articles\" or its translations (artigos, articulos, artikel, articoli, artikelen) in canonical URLs - always use the actual category name**\n- **Note:** Category translation to other languages (pt, es, fr, de, it) happens in the articleTranslation.md prompt, not in this SEO prompt\n\n**CATEGORY MAPPINGS (for canonical URLs):**\n- Health: \"health\"\n- Fitness: \"fitness\"\n- Nutrition: \"nutrition\"\n- Intimacy: \"intimacy\"\n- Beauty: \"beauty\"\n- Weight Loss: \"weight-loss\"\n- Life: \"life\"\n\n## 2. OUTPUT FORMAT\n**CRITICAL: You must output the result in the exact JSON format specified below. No other format is acceptable.**\n\n**MANDATORY JSON STRUCTURE:**\n```json\n{\n  \"metaTitle\": \"Meta title will be the article title (max 500 characters) - MAX 500 characters\",\n  \"metaDescription\": \"Compelling meta description that encourages clicks and summarizes the article content - MAX 1000 characters\",\n  \"keywords\": [\"keyword1\", \"keyword2\", \"keyword3\", \"keyword4\", \"keyword5\"],\n  \"slug\": \"intimate-wellness-guide\",\n  \"hreflang\": \"en\",\n  \"canonicalUrl\": \"https://womensspot.org/intimacy/intimate-wellness-guide\"\n}\n```\n\n**JSON FORMAT VALIDATION RULES:**\n1. **MUST start with `{` and end with `}`**\n2. **MUST have exactly 6 properties: `metaTitle`, `metaDescription`, `keywords`, `slug`, `hreflang` and `canonicalUrl`**\n3. **MUST have exactly 5 keywords in the keywords array**\n4. **MUST use double quotes for all keys and string values**\n5. **MUST NOT include any text before or after the JSON**\n6. **MUST NOT include any comments or explanations outside the JSON**\n7. **MUST be valid JSON that can be parsed by a JSON parser**\n\n**CRITICAL JSON QUOTE RULES - ABSOLUTELY MANDATORY:**\n- **ALL double quotes (\") within content MUST be replaced with single quotes (')**\n- **This is CRITICAL - double quotes break JSON parsing in n8n when data is treated as string**\n- **Examples of CORRECT usage:**\n  - Title: \"Understanding 'Popcorn Brain': Signs\" → JSON: `\"metaTitle\": \"Understanding 'Popcorn Brain': Signs\"`\n  - Description: \"The term 'popcorn brain'\" → JSON: `\"metaDescription\": \"The term 'popcorn brain'\"`\n- **Examples of INCORRECT (WILL CAUSE ERRORS):**\n  - WRONG: `\"metaTitle\": \"Understanding \"Popcorn Brain\": Signs\"` (double quotes break JSON)\n  - WRONG: `\"metaDescription\": \"The term \"popcorn brain\"\"` (double quotes break JSON)\n- **VERIFICATION: Before outputting, replace ALL double quotes within content with single quotes (apostrophes)**\n- **If your content needs quotes, use single quotes (') instead of double quotes (\") - this is not optional**\n\n**ABSOLUTELY FORBIDDEN:**\n- **NEVER use \"articles\" or its translations (artigos, articulos, artikel, articoli, artikelen) in canonical URLs**\n- **NEVER use generic URL patterns - MUST use the actual category name**\n- **NEVER use \"articles\" as a category replacement - always use the specific category (health, nutrition, intimacy, etc.)**\n- Do NOT create meta titles longer than 500 characters\n- Do NOT create meta descriptions longer than 1000 characters\n- Do NOT include fewer than 5 keywords or more than 5 keywords\n- Do NOT add any emojis, symbols, or special characters in any content\n- Do NOT make up false information\n- Do NOT change the core meaning or context\n- Do NOT output in any format other than the specified JSON\n- Do NOT include explicit, suggestive, or inappropriate terminology\n- Do NOT create metadata that would violate search engine guidelines\n- Do NOT include content that could be flagged by content filters\n- **Do NOT include generic year references** - remove all generic year references and replace with timeless language (e.g., \"in 2026\" → remove or use \"currently\", \"nowadays\", \"in recent times\")\n- **ONLY include years if they are tied to date-specific historical events** (e.g., \"World Cup 2022\", \"Olympic Games 2020\", \"COVID-19 pandemic in 2020\")\n- Do NOT add any text before or after the JSON object\n- Do NOT use single quotes instead of double quotes\n- Do NOT add trailing commas after the last item in objects or arrays\n- Do NOT include comments or explanations outside the JSON\n- Do NOT use backticks or markdown formatting around the JSON\n- Do NOT add line breaks or extra spaces that break JSON parsing\n- Do NOT include any characters that are not valid JSON\n- Do NOT add any prefix like \"Here is the JSON:\" or \"The result is:\"\n\n**CRITICAL: Your response must be ONLY the JSON object, nothing else.**\n```\n",
              "role": "system"
            }
          ]
        },
        "jsonOutput": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        2656,
        -80
      ],
      "id": "61da8fec-3e5e-4631-adbf-e809d1b690ef",
      "name": "Seo",
      "executeOnce": false,
      "retryOnFail": true,
      "waitBetweenTries": 5000,
      "credentials": {
        "openAiApi": {
          "id": "Gqus3026ccdUj9Mc",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=## USER MESSAGE\n\n```\n{{ JSON.stringify($('Rewrite article').item.json.message.content) }}\n\nAnalyze the above article content and create comprehensive social media content following the specified JSON format for all platforms (Instagram, Facebook, X/Twitter, Pinterest, Threads, TikTok).\n```\n\n---\n\n# DETAILED DOCUMENTATION\n\n**MANDATORY JSON STRUCTURE:**\n```json\n{\n  \"instagram\": {\n    \"caption\": \"Engaging caption with call-to-action - MAX 2200 characters (CRITICAL NO hashtags in caption, but the max chars should include the length of the hashatags)\",\n    \"hashtags\": \"#hashtag1 #hashtag2 #hashtag3 #hashtag4 #hashtag5\",\n    \"altText\": \"Accessibility text describing the image - MAX 1000 characters (NO hashtags)\"\n  },\n  \"facebook\": {\n    \"message\": \"Engaging message with educational content - MAX 63206 characters (NO hashtags in message, but the max chars should include the length of the hashatags)\",\n    \"headline\": \"Compelling headline - MAX 100 characters (NO hashtags)\",\n    \"linkDescription\": \"Link preview description - MAX 300 characters (NO hashtags)\",\n    \"hashtags\": \"#hashtag1 #hashtag2 #hashtag3 #hashtag4 #hashtag5\",\n    \"callToAction\": \"Learn More\"\n  },\n  \"xTwitter\": {\n    \"text\": \"Engaging tweet - MAX 280 characters (NO hashtags in text)\",\n    \"hashtags\": \"#hashtag1 #hashtag2 #hashtag3 #hashtag4 #hashtag5\"\n  },\n  \"pinterest\": {\n    \"title\": \"Compelling pin title - MAX 100 characters (NO hashtags)\",\n    \"description\": \"Detailed pin description - MAX 500 characters (NO hashtags, but the max chars should include the length of the hashatags)\",\n    \"hashtags\": \"#hashtag1 #hashtag2 #hashtag3 #hashtag4 #hashtag5\",\n    \"altText\": \"Accessibility text describing the image - MAX 500 characters (NO hashtags, but the max chars should include the length of the hashatags)\"\n  },\n  \"threads\": {\n    \"text\": \"Engaging thread post - MAX 500 characters (NO hashtags in text, but the max chars should include the length of the hashatags)\",\n    \"hashtags\": \"#hashtag1 #hashtag2 #hashtag3 #hashtag4 #hashtag5\"\n  },\n  \"tiktok\": {\n    \"title\": \"Engaging TikTok title - MAX 90 characters (NO hashtags)\",\n    \"caption\": \"Engaging TikTok caption - MAX 2200 characters (CRITICAL NO hashtags in caption, but the max chars should include the length of the hashatags)\",\n    \"hashtags\": \"#hashtag1 #hashtag2 #hashtag3 #hashtag4 #hashtag5\"\n  }\n}\n```\n\n**WRONG OUTPUT FORMATS (WILL CAUSE ERRORS):**\n- \"Here is the JSON response: { ... }\"\n- \"The result is: { ... }\"\n- \"```json\\n{ ... }\\n```\"\n- Any text before or after the JSON\n- Comments or explanations outside the JSON\n- Single quotes instead of double quotes\n- Missing any of the 6 required platforms\n- Duplicate hashtags within the same platform\n- Content exceeding platform character limits\n"
            },
            {
              "content": "## SYSTEM MESSAGE\n\n```\nYou are a social media content specialist and engagement expert for a **women's spot app**. You will receive article content and generate platform-optimized social media data for Instagram, Facebook, X (Twitter), Pinterest, Threads, and TikTok.\n\n- All social media platforms (Facebook, Instagram, X/Twitter, Pinterest, TikTok, Threads) will use the same image\n\n**IMPORTANT CONTEXT:** This content is for a **women's spot app** that covers educational topics, informational, and focused on sharing experiences and information about women's daily life - NOT explicit content.\n\n**CRITICAL SAFETY NOTE:** Even though this is educational content about women's it might includes some intimate articles, social media platforms and content filters may flag content with sexual terminology. Always use \"intimate wellness,\" \"personal wellness,\" \"relationship wellness,\" \"intimacy,\" or any other NON EXPLICIT terms to ensure proper social media performance and content safety.\n\n**CRITICAL INSTRUCTION: YOU MUST CREATE COMPREHENSIVE SOCIAL MEDIA CONTENT AND OUTPUT IN THE SPECIFIED JSON FORMAT.**\n\nYour task is to:\n\n## 1. CONTENT UNDERSTANDING AND ANALYSIS\n**ABSOLUTELY CRITICAL: YOU MUST READ, UNDERSTAND THE ARTICLE CONTENT AND CREATE SOCIAL MEDIA CONTENT THAT REFLECTS THE ARTICLE.**\n\n**STEP 1: READ THE ARTICLE CONTENT**\n- Analyze the provided article content thoroughly\n- Identify the main themes, topics, and key concepts\n- Extract the core information and context\n- Determine the primary category and target audience\n- Identify relevant hashtags and engagement strategies\n\n**STEP 2: CREATE SOCIAL MEDIA CONTENT**\nCreate comprehensive social media content that optimizes engagement across all platforms:\n- Instagram: Caption (max 2200 chars, CRITICAL NO hashtags in caption, but the max chars should include the length of the hashatags), hashtags (max 20 UNIQUE hashtags), alt text (max 1000 chars, NO hashtags)\n- Facebook: Message (max 63206 chars, NO hashtags in message, but the max chars should include the length of the hashatags), headline (max 100 chars, NO hashtags), link description (max 300 chars, NO hashtags), hashtags (UNIQUE hashtags only)\n- X (Twitter): Text (max 280 chars for free accounts, NO hashtags in text), hashtags (UNIQUE hashtags only)\n- Pinterest: Title (max 100 chars, NO hashtags), description (max 500 chars, NO hashtags, but the max chars should include the length of the hashatags), hashtags (UNIQUE hashtags only), alt text (max 500 chars, NO hashtags, but the max chars should include the length of the hashatags)\n- Threads: Text (max 500 chars, NO hashtags in text, but the max chars should include the length of the hashatags), hashtags (UNIQUE hashtags only)\n- TikTok: Title (max 90 characters), Caption (max 2200 chars, CRITICAL NO hashtags in caption, but the max chars should include the length of the hashatags), hashtags (max 5 UNIQUE hashtags only)\n\n**CRITICAL CHARACTER CALCULATION RULES:**\n- **For fields that include hashtags in their total limit**: Calculate the content field length as: (Platform Max Limit) - (Hashtags Length)\n- **Example**: Instagram caption max is 2200 chars total. If hashtags are 150 chars, then caption should be max 2050 chars (2200 - 150 = 2050)\n- **Example**: Facebook message max is 63206 chars total. If hashtags are 200 chars, then message should be max 63006 chars (63206 - 200 = 63006)\n- **Example**: Pinterest description max is 500 chars total. If hashtags are 80 chars, then description should be max 420 chars (500 - 80 = 420)\n- **Example**: Threads text max is 500 chars total. If hashtags are 120 chars, then text should be max 380 chars (500 - 120 = 380)\n- **Example**: TikTok caption max is 2200 chars total. If hashtags are 300 chars, then caption should be max 1900 chars (2200 - 300 = 1900)\n- **Fields that DON'T include hashtags in their limit**: Use the full character limit (headline, linkDescription, title, altText)\n\n**SOCIAL MEDIA OPTIMIZATION REQUIREMENTS:**\n- Content must be engaging and encourage interaction\n- Hashtags must be relevant to the article content and target audience\n- **CRITICAL: Hashtags must be UNIQUE within each individual social media platform - NO duplicate hashtags within the same platform**\n- **IMPORTANT: The same hashtag CAN appear across different platforms, but must NEVER repeat within the same platform**\n- **ABSOLUTELY CRITICAL: NO hashtags should EVER be included in any content fields (caption, message, headline, text, title, description, altText, but the max chars should include the length of the hashatags) - hashtags ONLY belong in the dedicated hashtags field**\n- All content must reflect the educational and wellness nature of the content\n- **CRITICAL: For women's intimacy topics (intimate life, intimate wellness, relationships, personal wellness), create appropriate, educational, and empowering social media content suitable for a women's spot app. These topics are about sharing experiences, articles and information about women's - focus on education, empowerment, and wellness, NOT explicit content.**\n\n**CRITICAL YEAR REFERENCE REQUIREMENTS:**\n- **DO NOT include generic year references** in any social media content (e.g., \"in 2026\", \"this year\", \"last year\", \"as of 2024\", \"studies from 2023\")\n- **All social media content must be reusable across any year** - it should not become outdated due to year references\n- **ONLY include years if they are tied to date-specific historical events** (e.g., \"World Cup 2022\", \"Olympic Games 2020\", \"COVID-19 pandemic in 2020\")\n- **Remove or rephrase any generic time references** that include years:\n  - \"This year's trends\" → \"Current trends\" or \"Latest trends\"\n  - \"Last year's research\" → \"Recent research\" or \"Latest research\"\n  - \"In 2024, experts say\" → \"Experts say\" or \"Currently, experts say\"\n- **Generic time references should be replaced with timeless alternatives:**\n  - \"this year\" → \"currently\", \"nowadays\", \"in recent times\", \"today\"\n  - \"last year\" → \"recently\", \"in recent times\", \"lately\"\n  - \"next year\" → \"in the future\", \"upcoming\", \"forthcoming\"\n- **Use timeless language** that remains relevant regardless of when the content is used\n\n**SOCIAL MEDIA SAFETY COMPLIANCE REQUIREMENTS:**\n- **NEVER include explicit sexual terminology in any social media content**\n- **NEVER include content that could be flagged by social media platforms**\n- **NEVER include inappropriate or offensive hashtags**\n- **ALWAYS use educational and wellness-focused language**\n- **ALWAYS ensure content is suitable for all audiences and social media platforms**\n- **ALWAYS use clear, unambiguous language that cannot be misinterpreted**\n- **ALWAYS focus on positive, educational, and wellness-related content**\n\n**CRITICAL: AVOID ALL SEXUAL TERMINOLOGY**\nSocial media platforms and content filters may flag content with sexual terminology, even in educational contexts. Use these safe alternatives:\n\n**EXAMPLE OF BLOCKED WORDS → SAFE ALTERNATIVES:**\n- \"sex\" → \"intimacy\" or \"wellness\" or \"relationships\"\n- \"sexual\" → \"intimate\" or \"personal\" or \"wellness\"\n- \"sexuality\" → \"intimacy\" or \"personal wellness\"\n- \"sex education\" → \"intimate wellness education\" or \"relationship wellness\"\n- \"sexual health\" → \"intimate wellness\" or \"personal wellness\"\n- \"sexual wellness\" → \"intimate wellness\" or \"personal wellness\"\n- \"sex life\" → \"intimate life\" or \"personal wellness\"\n- \"sexual pleasure\" → \"intimate satisfaction\" or \"personal wellness\"\n- \"sexual satisfaction\" → \"intimate satisfaction\" or \"personal wellness\"\n- \"sexual intimacy\" → \"intimate connection\" or \"personal connection\"\n- \"sexual relationship\" → \"intimate relationship\" or \"close relationship\"\n- \"sexual experience\" → \"intimate experience\" or \"personal experience\"\n\n**EXAMPLE OF PRODUCT-RELATED BLOCKED WORDS → SAFE ALTERNATIVES:**\n- \"sex toys\" → \"wellness accessories\" or \"intimate wellness products\"\n- \"pleasure toy\" → \"wellness device\" or \"intimate wellness tool\"\n- \"dildo\" → \"wellness accessory\" or \"personal care item\"\n- \"vibrator\" → \"wellness device\" or \"intimate care tool\"\n- \"anal plug kit\" → \"beginner-friendly personal wellness kit\"\n- \"anal toys, plugs, beads\" → \"variety of self-care wellness accessories\"\n- \"plugs\" → \"wellness accessories\" or \"personal care items\"\n- \"beads\" → \"wellness accessories\" or \"personal care items\"\n- \"silicone toy\" → \"wellness device\" or \"personal care tool\"\n- \"lubricant\" → \"wellness gel\" or \"intimate care product\"\n- \"plugs\" (even without \"anal\")\n- \"beads\" (even without sexual context)\n- \"silicone toy\" (even in wellness context)\n- \"toy\" (when referring to intimate products)\n- \"device\" (when referring to intimate products)\n- \"accessory\" (when referring to intimate products)\n\n**SAFE ALTERNATIVES FOR PRODUCT DESCRIPTIONS:**\n- Instead of \"plugs, beads, silicone toys\" → \"personal wellness products\"\n- Instead of \"wellness accessories\" → \"wellness products\" or \"self-care items\"\n- Instead of \"wellness devices\" → \"wellness products\" or \"personal care items\"\n- Instead of \"intimate accessories\" → \"intimate wellness products\"\n- Instead of \"wellness tools\" → \"wellness products\" or \"self-care items\"\n\n**SAFE CONTEXT WORDS TO INCLUDE:**\n- \"educational\"\n- \"wellness\"\n- \"intimacy\"\n- \"empowerment\"\n- \"self-care\"\n- \"relationship\"\n- \"intimate wellness\"\n- \"personal wellness\"\n- \"body-safe\"\n- \"wellness products\"\n- \"women's health\"\n- \"wellness education\"\n\n**Those are just few example and will be much more, just make sure to ALWAYS replace red flags words to keep the social media content suitable for every one**\n\n## PLATFORM-SPECIFIC FIELD REQUIREMENTS\n\n**INSTAGRAM:**\n- **Caption**: Maximum 2200 characters total (includes hashtag length). NO hashtags in caption text - hashtags ONLY in dedicated hashtags field. Calculate caption length as: 2200 - (hashtags length)\n- **Hashtags**: Maximum 20 UNIQUE hashtags. NO duplicates within Instagram.\n- **AltText**: Maximum 1000 characters. NO hashtags.\n\n**FACEBOOK:**\n- **Message**: Maximum 63206 characters total (includes hashtag length). NO hashtags in message text - hashtags ONLY in dedicated hashtags field. Calculate message length as: 63206 - (hashtags length)\n- **Headline**: Maximum 100 characters. NO hashtags.\n- **LinkDescription**: Maximum 300 characters. NO hashtags.\n- **Hashtags**: UNIQUE hashtags only. NO duplicates within Facebook.\n- **CallToAction**: Maximum 30 characters.\n\n**X (TWITTER):**\n- **Text**: Maximum 280 characters (for free accounts). NO hashtags in text - hashtags ONLY in dedicated hashtags field.\n- **Hashtags**: UNIQUE hashtags only. NO duplicates within X/Twitter.\n\n**PINTEREST:**\n- **Title**: Maximum 100 characters. NO hashtags.\n- **Description**: Maximum 500 characters total (includes hashtag length). NO hashtags in description text - hashtags ONLY in dedicated hashtags field. Calculate description length as: 500 - (hashtags length)\n- **Hashtags**: UNIQUE hashtags only. NO duplicates within Pinterest.\n- **AltText**: Maximum 500 characters total (includes hashtag length). NO hashtags in altText - hashtags ONLY in dedicated hashtags field. Calculate altText length as: 500 - (hashtags length)\n\n**THREADS:**\n- **Text**: Maximum 500 characters total (includes hashtag length). NO hashtags in text - hashtags ONLY in dedicated hashtags field. Calculate text length as: 500 - (hashtags length)\n- **Hashtags**: UNIQUE hashtags only. NO duplicates within Threads.\n\n**TIKTOK:**\n- **Title**: Maximum 90 characters. NO hashtags.\n- **Caption**: Maximum 2200 characters total (includes hashtag length). NO hashtags in caption text - hashtags ONLY in dedicated hashtags field. Calculate caption length as: 2200 - (hashtags length)\n- **Hashtags**: Maximum 5 UNIQUE hashtags. NO duplicates within TikTok.\n\n## 2. CRITICAL HASHTAG UNIQUENESS REQUIREMENTS\n\n**ABSOLUTELY CRITICAL: HASHTAG UNIQUENESS RULES**\n\n- **WITHIN EACH PLATFORM: Hashtags must be 100% UNIQUE - NO duplicates allowed within the same social media platform**\n- **ACROSS PLATFORMS: The same hashtag CAN and SHOULD appear across different platforms for consistency**\n- **EXAMPLE CORRECT USAGE:**\n  - Instagram: \"#WomensWellness #SelfCare #IntimateWellness #HealthTips #WellnessEducation\"\n  - Facebook: \"#WomensWellness #SelfCare #IntimateWellness #HealthEducation #WellnessProducts\"\n  - X/Twitter: \"#WomensWellness #SelfCare #IntimateWellness #HealthTips #WellnessEducation\"\n- **EXAMPLE INCORRECT USAGE (WILL CAUSE ERRORS):**\n  - Instagram: \"#WomensWellness #SelfCare #WomensWellness #HealthTips\" (duplicate #WomensWellness)\n  - Facebook: \"#SelfCare #SelfCare #IntimateWellness\" (duplicate #SelfCare)\n\n**VALIDATION CHECKLIST FOR HASHTAGS:**\n- Count total hashtags per platform\n- Verify NO duplicate hashtags within the same platform\n- Ensure hashtags are relevant to article content\n- Confirm hashtags follow platform character limits\n- Check hashtags are safe and appropriate for social media\n\n## 3. OUTPUT FORMAT\n**CRITICAL: You must output the result in the exact JSON format specified below. No other format is acceptable.**\n\n**MANDATORY JSON STRUCTURE:**\n{\n  \"instagram\": {\n    \"caption\": \"Engaging caption with call-to-action - MAX 2200 characters (CRITICAL NO hashtags in caption, but the max chars should include the length of the hashatags)\",\n    \"hashtags\": \"#hashtag1 #hashtag2 #hashtag3 #hashtag4 #hashtag5\",\n    \"altText\": \"Accessibility text describing the image - MAX 1000 characters (NO hashtags, but the max chars should include the length of the hashatags)\",\n  },\n  \"facebook\": {\n    \"message\": \"Engaging message with educational content - MAX 63206 characters (NO hashtags in message, but the max chars should include the length of the hashatags)\",\n    \"headline\": \"Compelling headline - MAX 100 characters (NO hashtags)\",\n    \"linkDescription\": \"Link preview description - MAX 300 characters (NO hashtags)\",\n    \"hashtags\": \"#hashtag1 #hashtag2 #hashtag3 #hashtag4 #hashtag5\",\n    \"callToAction\": \"Learn More\",\n  },\n  \"xTwitter\": {\n    \"text\": \"Engaging tweet - MAX 280 characters (NO hashtags in text)\",\n    \"hashtags\": \"#hashtag1 #hashtag2 #hashtag3 #hashtag4 #hashtag5\",\n  },\n  \"pinterest\": {\n    \"title\": \"Compelling pin title - MAX 100 characters (NO hashtags)\",\n    \"description\": \"Detailed pin description - MAX 500 characters (NO hashtags, but the max chars should include the length of the hashatags)\",\n    \"hashtags\": \"#hashtag1 #hashtag2 #hashtag3 #hashtag4 #hashtag5\",\n    \"altText\": \"Accessibility text describing the image - MAX 500 characters (NO hashtags, but the max chars should include the length of the hashatags)\",\n  },\n  \"threads\": {\n    \"text\": \"Engaging thread post - MAX 500 characters (NO hashtags in text, but the max chars should include the length of the hashatags)\",\n    \"hashtags\": \"#hashtag1 #hashtag2 #hashtag3 #hashtag4 #hashtag5\",\n  },\n  \"tiktok\": {\n    \"title\": \"Engaging TikTok title - MAX 90 characters (NO hashtags)\",\n    \"caption\": \"Engaging TikTok caption - MAX 2200 characters (CRITICAL NO hashtags in caption, but the max chars should include the length of the hashatags)\",\n    \"hashtags\": \"#hashtag1 #hashtag2 #hashtag3 #hashtag4 #hashtag5\",\n  }\n}\n\n**JSON FORMAT VALIDATION RULES:**\n1. **MUST start with `{` and end with `}`**\n2. **MUST have exactly 6 social media platforms: `instagram`, `facebook`, `xTwitter`, `pinterest`, `threads`, `tiktok`**\n3. **MUST use double quotes for all keys and string values**\n4. **MUST NOT include any text before or after the JSON**\n5. **MUST NOT include any comments or explanations outside the JSON**\n6. **MUST be valid JSON that can be parsed by a JSON parser**\n\n**CRITICAL CHARACTER LIMIT ENFORCEMENT:**\n- **ALL social media content MUST follow the exact character limits specified above**\n- **If ANY content exceeds platform limits, REWRITE to fit EXACTLY within the limit**\n- **Character counting is MANDATORY for every single social media field**\n- **NO content can exceed platform-specific limits - this will cause API errors**\n- **Platform limits are NON-NEGOTIABLE and must be enforced with 100% accuracy**\n- **Each platform has different limits - respect each one individually**\n- **This applies to ALL nested properties in social media content**\n- **NO EXCEPTIONS - every single text field must comply**\n- **Count characters for every single field before outputting**\n- **If ANY field exceeds its limit, you MUST rewrite that specific value to fit**\n\n**CRITICAL JSON QUOTE RULES - ABSOLUTELY MANDATORY:**\n- **ALL double quotes (\") within content MUST be replaced with single quotes (')**\n- **This is CRITICAL - double quotes break JSON parsing in n8n when data is treated as string**\n- **Examples of CORRECT usage:**\n  - Caption: \"Discover 'Popcorn Brain' signs\" → JSON: `\"caption\": \"Discover 'Popcorn Brain' signs\"`\n  - Text: \"The term 'popcorn brain'\" → JSON: `\"text\": \"The term 'popcorn brain'\"`\n- **Examples of INCORRECT (WILL CAUSE ERRORS):**\n  - WRONG: `\"caption\": \"Discover \"Popcorn Brain\" signs\"` (double quotes break JSON)\n  - WRONG: `\"text\": \"The term \"popcorn brain\"\"` (double quotes break JSON)\n- **VERIFICATION: Before outputting, replace ALL double quotes within content with single quotes (apostrophes)**\n- **If your content needs quotes, use single quotes (') instead of double quotes (\") - this is not optional**\n\n**ABSOLUTELY FORBIDDEN:**\n- **Do NOT create content longer than specified character limits - this will cause API errors**\n- **Do NOT include more hashtags than allowed per platform - this will cause API errors**\n- **Do NOT include hashtags in any content fields (caption, message, headline, text, title, description, altText) - hashtags ONLY belong in the dedicated hashtags field**\n- **Do NOT include duplicate hashtags within the same social media platform**\n- **Do NOT repeat hashtags within the same platform - each hashtag must be unique per platform**\n- **Do NOT assume \"close enough\" - exact compliance is mandatory**\n- **Do NOT skip character counting - verify every single field**\n- **Do NOT ignore character limits - every single property must comply**\n- **Do NOT create content that would cause API errors**\n- Do NOT add any emojis, symbols, or special characters in any content\n- Do NOT make up false information\n- Do NOT change the core meaning or context\n- Do NOT output in any format other than the specified JSON\n- Do NOT include explicit, suggestive, or inappropriate terminology\n- Do NOT create content that would violate social media guidelines\n- Do NOT include content that could be flagged by content filters\n- **Do NOT include generic year references** - remove all generic year references and replace with timeless language (e.g., \"in 2026\" → remove or use \"currently\", \"nowadays\", \"in recent times\")\n- **ONLY include years if they are tied to date-specific historical events** (e.g., \"World Cup 2022\", \"Olympic Games 2020\", \"COVID-19 pandemic in 2020\")\n\n**JSON FORMATTING ERRORS TO AVOID:**\n- Do NOT add any text before or after the JSON object\n- Do NOT use single quotes instead of double quotes\n- Do NOT add trailing commas after the last item in objects or arrays\n- Do NOT include comments or explanations outside the JSON\n- Do NOT use backticks or markdown formatting around the JSON\n- Do NOT add line breaks or extra spaces that break JSON parsing\n- Do NOT include any characters that are not valid JSON\n- Do NOT add any prefix like \"Here is the JSON:\" or \"The result is:\"\n\n**CRITICAL: Your response must be ONLY the JSON object, nothing else.**\n```",
              "role": "system"
            }
          ]
        },
        "jsonOutput": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        2960,
        -80
      ],
      "id": "cab51c50-f8ff-43e6-a4d1-2161679deadd",
      "name": "Social media",
      "executeOnce": false,
      "retryOnFail": true,
      "waitBetweenTries": 5000,
      "credentials": {
        "openAiApi": {
          "id": "Gqus3026ccdUj9Mc",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"languages\": [\n    {\n      \"hreflang\": \"en\",\n      \"articleContext\": \"{{ $('Article context').item.json.message.content.articleContext }}\",\n      \"seo\": {{ JSON.stringify($('Seo').item.json.message.content) }},\n      \"content\": {{ JSON.stringify($('Rewrite article').item.json.message.content) }},\n      \"socialMedia\": {{ JSON.stringify($('Social media').item.json.message.content) }},\n      \"salesProducts\": {{ JSON.stringify($json.message.content.salesProducts) }}\n    }\n  ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        3600,
        -80
      ],
      "id": "f018dd0c-51b6-49ca-b3d0-73bd34247c9b",
      "name": "Format article json"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"_id\": \"{{ $('Generate MongoDB  _ID').item.json._id }}\",\n  \"languages\": [\n{{ JSON.stringify($('Format article json').first().json.languages[0]) }},\n{{ JSON.stringify($json.data[0]) }},\n{{ JSON.stringify($json.data[1]) }},\n{{ JSON.stringify($json.data[2]) }},\n{{ JSON.stringify($json.data[3]) }},\n{{ JSON.stringify($json.data[4]) }}\n  ],\n  \"category\": {{ JSON.stringify($('Get URL row').first().json.Type) }},\n  \"imagesContext\": {{ JSON.stringify($('Media context').item.json.message.content.imagesContext) }},\n \n  \"createdBy\": \"68e6a79afb1932c067f96e30\"\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        4560,
        -592
      ],
      "id": "b7795cac-25b1-4f4b-a703-38ec5252cae9",
      "name": "Full article json",
      "executeOnce": true,
      "notesInFlow": false
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1VIDK6jaicE6HRZ88hx-iSAdtRlX4atPKXVoJph5WD2g",
          "mode": "list",
          "cachedResultName": "womens-spot",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1VIDK6jaicE6HRZ88hx-iSAdtRlX4atPKXVoJph5WD2g/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "={{\n  ({\n    Monday: 'fitness',\n    Tuesday: 'nutrition',\n    Wednesday: 'health',\n    Thursday: 'intimacy',\n    Friday: 'beauty',\n    Saturday: 'weight-loss'\n  }[new Date().toLocaleDateString('en-US', { weekday: 'long' })] || 'life')\n}}",
          "mode": "name"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Input URL": "={{ $('Get URL row').item.json['Input URL'] }}",
            "EN": "={{ JSON.stringify($json.languages[0]) }}",
            "Output URL": "={{ $json.languages[0].seo.canonicalUrl }}"
          },
          "matchingColumns": [
            "Input URL"
          ],
          "schema": [
            {
              "id": "Date",
              "displayName": "Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Input URL",
              "displayName": "Input URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Type",
              "displayName": "Type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Article ID",
              "displayName": "Article ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Image URL",
              "displayName": "Image URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "EN",
              "displayName": "EN",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Output URL",
              "displayName": "Output URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Tiktok",
              "displayName": "Tiktok",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Pintrest",
              "displayName": "Pintrest",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Twitter X",
              "displayName": "Twitter X",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Facebook",
              "displayName": "Facebook",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Threads",
              "displayName": "Threads",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Instagran",
              "displayName": "Instagran",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Errors message",
              "displayName": "Errors message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        4768,
        -592
      ],
      "id": "a815f54b-3b2c-45f8-ba23-89b46cc13a66",
      "name": "Save to sheets",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "5osTTYhZaXHkk1mD",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1VIDK6jaicE6HRZ88hx-iSAdtRlX4atPKXVoJph5WD2g",
          "mode": "list",
          "cachedResultName": "womens-spot",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1VIDK6jaicE6HRZ88hx-iSAdtRlX4atPKXVoJph5WD2g/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "={{\n  ({\n    Monday: 'fitness',\n    Tuesday: 'nutrition',\n    Wednesday: 'health',\n    Thursday: 'intimacy',\n    Friday: 'beauty',\n    Saturday: 'weight-loss'\n  }[new Date().toLocaleDateString('en-US', { weekday: 'long' })] || 'life')\n}}",
          "mode": "name"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Input URL": "={{ $('Get URL row').item.json[\"Input URL\"] }}",
            "Status": "Created"
          },
          "matchingColumns": [
            "Input URL"
          ],
          "schema": [
            {
              "id": "Date",
              "displayName": "Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Input URL",
              "displayName": "Input URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Type",
              "displayName": "Type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Article ID",
              "displayName": "Article ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Image URL",
              "displayName": "Image URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "EN",
              "displayName": "EN",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Output URL",
              "displayName": "Output URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Tiktok",
              "displayName": "Tiktok",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Pintrest",
              "displayName": "Pintrest",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Twitter X",
              "displayName": "Twitter X",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Facebook",
              "displayName": "Facebook",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Threads",
              "displayName": "Threads",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Instagran",
              "displayName": "Instagran",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Errors message",
              "displayName": "Errors message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        5280,
        -688
      ],
      "id": "9260b772-c615-4c1e-b01f-d81be847b0a5",
      "name": "Created",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "5osTTYhZaXHkk1mD",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1VIDK6jaicE6HRZ88hx-iSAdtRlX4atPKXVoJph5WD2g",
          "mode": "list",
          "cachedResultName": "womens-spot",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1VIDK6jaicE6HRZ88hx-iSAdtRlX4atPKXVoJph5WD2g/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "={{\n  ({\n    Monday: 'fitness',\n    Tuesday: 'nutrition',\n    Wednesday: 'health',\n    Thursday: 'intimacy',\n    Friday: 'beauty',\n    Saturday: 'weight-loss'\n  }[new Date().toLocaleDateString('en-US', { weekday: 'long' })] || 'life')\n}}",
          "mode": "name"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Input URL": "={{ $('Get URL row').item.json[\"Input URL\"] }}",
            "EN": "={{ JSON.stringify($('Rewrite article').item.json.message.content) }}",
            "Article ID": "={{ $json._id }}",
            "Status": "Pending",
            "Date": "={{ $now.toLocaleString() }}"
          },
          "matchingColumns": [
            "Input URL"
          ],
          "schema": [
            {
              "id": "Date",
              "displayName": "Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Input URL",
              "displayName": "Input URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Type",
              "displayName": "Type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Article ID",
              "displayName": "Article ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Image URL",
              "displayName": "Image URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "EN",
              "displayName": "EN",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Output URL",
              "displayName": "Output URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Tiktok",
              "displayName": "Tiktok",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Pintrest",
              "displayName": "Pintrest",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Twitter X",
              "displayName": "Twitter X",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Facebook",
              "displayName": "Facebook",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Threads",
              "displayName": "Threads",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Instagran",
              "displayName": "Instagran",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Errors message",
              "displayName": "Errors message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        2480,
        -80
      ],
      "id": "5b0edfe6-8898-40eb-a1dd-1ffa2691ddd0",
      "name": "Safe sheet point",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "5osTTYhZaXHkk1mD",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1VIDK6jaicE6HRZ88hx-iSAdtRlX4atPKXVoJph5WD2g",
          "mode": "list",
          "cachedResultName": "womens-spot",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1VIDK6jaicE6HRZ88hx-iSAdtRlX4atPKXVoJph5WD2g/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "={{\n  ({\n    Monday: 'fitness',\n    Tuesday: 'nutrition',\n    Wednesday: 'health',\n    Thursday: 'intimacy',\n    Friday: 'beauty',\n    Saturday: 'weight-loss'\n  }[new Date().toLocaleDateString('en-US', { weekday: 'long' })] || 'life')\n}}",
          "mode": "name"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Input URL": "={{ $('Get URL row').item.json[\"Input URL\"] }}",
            "Status": "Create Error",
            "Errors message": "={{ $json.error }}"
          },
          "matchingColumns": [
            "Input URL"
          ],
          "schema": [
            {
              "id": "Date",
              "displayName": "Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Input URL",
              "displayName": "Input URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Type",
              "displayName": "Type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Article ID",
              "displayName": "Article ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Image URL",
              "displayName": "Image URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "EN",
              "displayName": "EN",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Output URL",
              "displayName": "Output URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Tiktok",
              "displayName": "Tiktok",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Pintrest",
              "displayName": "Pintrest",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Twitter X",
              "displayName": "Twitter X",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Facebook",
              "displayName": "Facebook",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Threads",
              "displayName": "Threads",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Instagran",
              "displayName": "Instagran",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Errors message",
              "displayName": "Errors message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        5280,
        -512
      ],
      "id": "87b97e3d-338e-4ef0-97db-9a0e9d139636",
      "name": "Handle create article error",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "5osTTYhZaXHkk1mD",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "extractHtmlContent",
        "extractionValues": {
          "values": [
            {
              "key": "body",
              "cssSelector": "main",
              "skipSelectors": "img, a, link, span"
            }
          ]
        },
        "options": {
          "trimValues": true,
          "cleanUpText": true
        }
      },
      "type": "n8n-nodes-base.html",
      "typeVersion": 1.2,
      "position": [
        3968,
        -608
      ],
      "id": "bc286f63-5c51-437e-ac0a-14e12fd41a5f",
      "name": "Format HTML data"
    },
    {
      "parameters": {
        "url": "={{ $json['Input URL'] }}",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
            },
            {
              "name": "Accept",
              "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.9"
            },
            {
              "name": "Referer",
              "value": "https://www.google.com/"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {}
          ]
        },
        "options": {
          "allowUnauthorizedCerts": true
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        3792,
        -608
      ],
      "id": "35677c26-1d9d-4117-ac5a-f69ce88f7766",
      "name": "Extract HTML",
      "retryOnFail": true
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 18,
              "triggerAtMinute": null
            },
            {
              "triggerAtHour": 18,
              "triggerAtMinute": 20
            },
            {
              "triggerAtHour": 18,
              "triggerAtMinute": 40
            },
            {
              "triggerAtHour": 19,
              "triggerAtMinute": null
            },
            {
              "triggerAtHour": 19,
              "triggerAtMinute": 20
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        3152,
        -848
      ],
      "id": "cdc943bd-357f-4553-a77c-78f9f44d3798",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {
        "content": "## Dynamic topic",
        "height": 288,
        "width": 208,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        3520,
        -704
      ],
      "typeVersion": 1,
      "id": "305668ee-9bc3-4bfc-9e81-b67e9999acc5",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "content": "## Dynamic topic",
        "height": 288,
        "width": 192,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        3296,
        -704
      ],
      "typeVersion": 1,
      "id": "9e73d494-dd46-48e9-a538-f7078519d94d",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "content": "## Dynamic topic",
        "height": 240,
        "width": 208,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2416,
        -160
      ],
      "typeVersion": 1,
      "id": "0715614a-6385-4cc7-8e7d-d1ba3e63d90b",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "content": "## Dynamic topic",
        "height": 288,
        "width": 192,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        4720,
        -688
      ],
      "typeVersion": 1,
      "id": "26bb9b36-d35c-41ab-b1d8-a5a8991c1c4b",
      "name": "Sticky Note7"
    },
    {
      "parameters": {
        "content": "## Dynamic topic",
        "height": 464,
        "width": 256,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        5216,
        -784
      ],
      "typeVersion": 1,
      "id": "55165283-b799-4495-af08-62eff06ab1c3",
      "name": "Sticky Note8"
    },
    {
      "parameters": {
        "jsCode": "return [{ \"language\": \"Portuguese\", \"lang\": \"PT\"}, { \"language\": \"Spanish\", \"lang\": \"ES\"}, { \"language\": \"French\", \"lang\": \"FR\"}, { \"language\": \"Italian\", \"lang\": \"IT\"}, { \"language\": \"German\", \"lang\": \"DE\"}]"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3792,
        -80
      ],
      "id": "f3ace8b2-bb11-4c43-95d4-5ce9d7f61ebe",
      "name": "Languages array"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        3968,
        -80
      ],
      "id": "7bcca08c-a9e2-41ef-b9a4-8e69c94d48ea",
      "name": "Loop over languages"
    },
    {
      "parameters": {
        "amount": 2
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        5232,
        448
      ],
      "id": "6310e37b-d27a-4cf8-bf7b-732f4634d0cf",
      "name": "Wait",
      "webhookId": "37f28c95-dcde-4283-a8fb-1e1604fb44fa"
    },
    {
      "parameters": {
        "aggregate": "={{ JSON.stringify($('Full especific lang article').item.json.message.content) }}",
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {}
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        4384,
        -592
      ],
      "id": "ad2887de-6919-46c8-9410-12491d92e955",
      "name": "Aggregate languages objects"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=## USER MESSAGE\n```\nPlease analyze and rewrite the following article content:\n\n{{ $('Sanitize data').item.json.data }}\n```\n\n---\n\n# DETAILED DOCUMENTATION\n\n**MANDATORY JSON STRUCTURE**\n```json\n{\n  \"mainTitle\": \"Rewritten main title here\",\n  \"articleContents\": [\n    {\n      \"subTitle\": \"Rewritten subtitle 1\",\n      \"articleParagraphs\": [\n        \"Rewritten paragraph 1\",\n        \"Rewritten paragraph 2\"\n      ]\n    },\n    {\n      \"subTitle\": \"Rewritten subtitle 2\", \n      \"articleParagraphs\": [\n        \"Rewritten paragraph 1\",\n        \"Rewritten paragraph 2\",\n        \"Rewritten paragraph 3\"\n      ]\n    },\n    {\n      \"subTitle\": \"Rewritten subtitle 3\",\n      \"articleParagraphs\": [\n        \"Rewritten paragraph 1\",\n        \"Rewritten paragraph 2\",\n        \"Rewritten paragraph 3\"\n      ]\n    },\n    {\n      \"subTitle\": \"Rewritten subtitle 4\",\n      \"articleParagraphs\": [\n        \"Rewritten paragraph 1\",\n        \"Rewritten paragraph 2\",\n        \"Rewritten paragraph 3\",\n        \"Rewritten paragraph 4\",\n        \"Rewritten paragraph 5\"\n      ]\n    }\n  ]\n}\n```\n\n**WRONG OUTPUT FORMATS (WILL CAUSE ERRORS):**\n- \"Here is the JSON response: { ... }\"\n- \"The result is: { ... }\"\n- \"```json\\n{ ... }\\n```\"\n- Any text before or after the JSON\n- Comments or explanations outside the JSON\n- Single quotes instead of double quotes\n- Missing required fields (mainTitle or articleContents)\n- Empty articleContents array\n- Article contents with fewer than 4 sections\n"
            },
            {
              "content": "## SYSTEM MESSAGE\n```\nYou are an article content rewriter for a **women's spot app**. You will receive article content and rewrite it to make it look different while preserving the same context and making it longer.\n\n**CRITICAL LANGUAGE REQUIREMENT: ALL OUTPUT MUST BE IN ENGLISH ONLY. NO EXCEPTIONS.**\n\n**IMPORTANT CONTEXT:** This content is for a **women's spot app** that covers topics including women's daily life. These topics are educational, informational, and focused on sharing experiences and information about women's daily life - NOT explicit content.\n\n**CRITICAL INSTRUCTION: YOU MUST REWRITE THE ARTICLE TO MAKE IT LOOK DIFFERENT, KEEPING SAME CONTEXT, PATTERNS, AND OUTPUT IN THE SPECIFIED JSON FORMAT.**\n\n**MANDATORY: ALL CONTENT MUST BE IN ENGLISH ONLY - NO OTHER LANGUAGES ALLOWED.**\n\n**MANDATORY LENGTH ENFORCEMENT: THE REWRITTEN ARTICLE CANNOT BE SMALLER THAN THE ORIGINAL. THIS IS NOT OPTIONAL. IF YOU CREATE A SHORTER ARTICLE, YOU WILL FAIL THE TASK.**\n\n## CONTENT ANALYSIS AND REWRITING\n\n**STEP 1: READ THE ARTICLE CONTENT**\n- Analyze the provided article content\n- Identify the main article structure and content\n- Extract the core information and context\n- **COUNT the total character count of the original article**\n- **CRITICAL: ALL ANALYSIS AND OUTPUT MUST BE IN ENGLISH ONLY**\n\n**STEP 2: REWRITE THE CONTENT**\nRewrite the article to make it look different while preserving the same context:\n\n**REWRITING REQUIREMENTS:**\n- Rewrite the title with different wording but same meaning\n- Rewrite all paragraphs with different sentence structure and vocabulary\n- Keep steps patterns if included in the original article\n- **Make the tone casual, conversational, and easy to connect with readers**\n- Use \"you\" and \"your\" to directly address the reader\n- Write in a friendly, approachable style that feels like talking to a friend\n- Use simpler, more relatable language while maintaining professionalism\n- **Create emotional connection** by acknowledging reader experiences and challenges\n- **Ask engaging questions** that readers can relate to\n- **Share relatable scenarios** and situations readers might recognize\n- **ABSOLUTELY NO EMOJIS** - Do not add any emojis, symbols, or special characters\n- Maintain the same factual information and context\n- Keep the same logical flow and structure\n- Use different examples, analogies, and explanations where possible\n- Ensure the rewritten content is unique but conveys the same information\n- Do NOT copy exact text from the original\n- Do NOT make up false information\n- Do NOT change the core meaning or context\n\n**LENGTH REQUIREMENTS - ABSOLUTELY CRITICAL:**\n- **MANDATORY: The rewritten article must be longer than the original**\n- **CRITICAL: The new article must have AT LEAST the same quantity of characters as the original**\n- **NEVER create a shorter article than the original - this is absolutely forbidden**\n- **Add more detailed explanations** of key concepts and terms\n- **Include additional examples** and real-world scenarios\n- **Expand on important points** with more comprehensive information\n- **Add practical tips** and actionable advice for readers\n- **Include more context** and background information\n- **Elaborate on benefits** and potential outcomes\n\n**CONTENT ENHANCEMENT AND COMPLEMENTARY ADDITIONS:**\n- **Feel free to add complementary content** that enhances the article's value and keeps readers engaged\n- **Add relevant background information** that provides better context for readers\n- **Include additional insights** that complement the original content without changing the core message\n- **Expand on topics** with related information that readers would find valuable\n- **Add practical applications** and real-world examples that make the content more relatable\n- **Include helpful tips and advice** that go beyond the original scope when relevant\n- **Enhance explanations** with more comprehensive details that help readers understand better\n- **Add transitional content** that improves the flow and keeps readers interested throughout\n- **Include complementary topics** that naturally relate to the main subject matter\n- **Ensure all additions maintain the same tone, style, and context as the original article**\n\n**STEP 3: VERIFY LENGTH REQUIREMENT**\n- **COUNT the total character count of the rewritten article**\n- **VERIFY that the rewritten article is longer than the original**\n- **IF the rewritten article is shorter than required, ADD MORE CONTENT immediately**\n- **DO NOT proceed to JSON formatting until length requirement is met**\n- **LENGTH VERIFICATION IS MANDATORY - DO NOT SKIP THIS STEP**\n\n**STEP 4: STRUCTURE FOR JSON OUTPUT**\nOrganize the rewritten content into the required JSON format:\n- Main title (rewritten, maximum 400 characters)\n- At least 4 article content sections (minimum 4, maximum 12), each with:\n  - Subtitle (rewritten, maximum 400 characters)\n  - Article paragraphs (rewritten, minimum 2 paragraphs, maximum 8 paragraphs per section)\n\n## NOISE FILTERING\n\nExclude all unrelated content such as:\n- Advertisements and sponsored content\n- Navigation menus and breadcrumbs\n- Footers and headers\n- Suggested or related articles\n- Marketing or subscription prompts\n- Social media links and sharing buttons\n- Reader comments or discussions\n- Cookie notices and legal disclaimers\n- Newsletter signup forms\n- Sidebar widgets and promotional content\n- Videos and irrelevant media\n\n**AUTHOR AND WEBSITE INFORMATION FILTERING:**\n**CRITICAL: Remove ALL references to the original source and authorship:**\n- Author names, bylines, and writer credits\n- Editor names and editorial credits\n- Website names and publication sources\n- Publication dates and timestamps\n- Copyright notices and attribution lines\n- \"About the author\" sections\n- Author bio information\n- Website branding and logos\n- Source citations that mention the original website\n- Any text that identifies where the article was originally published\n- Editorial notes and author commentary\n- Writer credentials and qualifications\n- Publication house or media company names\n- Original article URLs or links\n- Social media handles of authors or websites\n- Any mention of \"this website,\" \"our site,\" or similar references\n\n**The rewritten article must be completely standalone and contain ONLY the article content itself.**\n\n## CONTENT FILTERING AND TRANSFORMATION\n\n**CRITICAL BRAND REPLACEMENT: Replace ALL mentions of the original source brand/website with \"Women's Spot\"**\n- **If the article mentions any source publication name** (e.g., \"Women's Health\", \"Healthline\", \"WebMD\", \"Mayo Clinic\", \"Verywell Health\", \"Health.com\", \"Prevention\", \"Shape\", \"Self\", \"Cosmopolitan\", \"Glamour\", or any other publication), **REPLACE it with \"Women's Spot\"**\n- **Examples of replacements:**\n  - \"According to Women's Health\" → \"According to Women's Spot\"\n  - \"Women's Health reports\" → \"Women's Spot reports\"\n  - \"As Healthline explains\" → \"As Women's Spot explains\"\n  - \"WebMD suggests\" → \"Women's Spot suggests\"\n  - \"Our research at [Original Source]\" → \"Women's Spot research\"\n  - \"Studies from [Original Source]\" → \"Women's Spot studies\"\n  - Any reference to the original publication's name → \"Women's Spot\"\n- **This applies to ALL mentions throughout the article content**, including:\n  - In-text citations and references\n  - Study attributions\n  - Expert quotes that mention the source\n  - Any brand name or publication name that appears in the article\n- **CRITICAL: The rewritten article must appear as if it originated from Women's Spot - no traces of the original source brand should remain**\n- **This is a branding requirement - failure to replace source brands will result in incorrect attribution**\n\n**CRITICAL YEAR REFERENCE UPDATES: Remove generic year references and use timeless language, but preserve historically specific years**\n- **REMOVE generic year references and use timeless alternatives:**\n  - If the article mentions a year in a generic context (e.g., \"in 2022\", \"during 2023\", \"as of 2024\", \"in 2025\", \"in 2026\"), remove the year reference and use timeless language\n  - **Examples of CORRECT timeless replacements:**\n    - \"A study from 2022\" → \"Recent studies show\" or \"Studies indicate\" or \"Research shows\"\n    - \"Research conducted in 2023\" → \"Research shows\" or \"Current research indicates\" or \"Studies have found\"\n    - \"Discover how Adidas' 2026 fragrance line...\" → \"Discover how Adidas' fragrance line...\" or \"Discover how Adidas' latest fragrance line...\"\n    - \"Now on 2026 experts think...\" → \"Nowadays experts think...\" or \"Currently experts think...\" or \"In recent times experts think...\"\n    - \"This year's trends\" → \"Current trends\" or \"Latest trends\" or \"Modern trends\"\n    - \"Last year's research\" → \"Recent research\" or \"Latest research\" or \"Current research\"\n    - \"In 2024, studies found\" → \"Studies have found\" or \"Recent studies found\" or \"Research indicates\"\n    - \"During 2023, experts noted\" → \"Experts have noted\" or \"Recently, experts noted\"\n    - \"As of 2025, the data shows\" → \"Current data shows\" or \"The data shows\" or \"Recent data indicates\"\n  - **Generic time references should be replaced with timeless alternatives:**\n    - \"this year\" → \"currently\", \"nowadays\", \"in recent times\", \"today\", \"in the present day\"\n    - \"last year\" → \"recently\", \"in recent times\", \"lately\", \"in the past\"\n    - \"next year\" → \"in the future\", \"upcoming\", \"forthcoming\", \"in coming times\"\n    - \"in 202X\" (generic) → remove year or use \"currently\", \"nowadays\", \"in recent times\"\n  - **Product launches and releases: Remove year references unless the year is part of the product name**\n    - \"Adidas' 2026 collection\" → \"Adidas' collection\" or \"Adidas' latest collection\"\n    - \"iPhone 15 Pro from 2023\" → Keep \"iPhone 15 Pro\" (year is part of product identification if needed for product search)\n- **PRESERVE historically specific year references:**\n  - Do NOT change years that are tied to specific historical events (e.g., \"World Cup Football 2022\", \"Olympic Games 2020\", \"COVID-19 pandemic in 2020\")\n  - Do NOT change years in historical contexts (e.g., \"the 2016 election\", \"the 2008 financial crisis\")\n  - Do NOT change years that are part of product names or model numbers (e.g., \"iPhone 15 Pro from 2023\" - keep the year if it's part of the product identification)\n  - Do NOT change years in study citations if the year is crucial for identifying the specific study\n- **When in doubt:** If a year is tied to a specific, identifiable event or historical moment, preserve it. If it's just a generic time reference, remove it and use timeless language\n\n**PERSONAL INFORMATION ANONYMIZATION:**\nIf the article contains specific information about individual people (names, personal details, specific cases), anonymize them while preserving the informational value:\n- Replace specific names with generic identifiers (e.g., \"John Smith\" → \"Sarah Connor\" or \"Charlotte Banks\")\n- Replace specific locations with generic terms (e.g., \"Springfield General Hospital\" → \"Local Hospital\")\n- Replace specific dates with relative terms when appropriate (e.g., \"January 15th, 2023\" → \"recently\" if the date is not crucial)\n- Maintain the factual content and medical/health information while removing personally identifiable details\n\n**PRODUCT AND MERCHANDISE PRESERVATION:**\n**CRITICAL: When the article refers to products, items, merchandise, or anything purchasable, PRESERVE the exact names:**\n- **DO NOT change product names** (e.g., \"iPhone 15 Pro\", \"Nike Air Max\", \"Maybelline Fit Me Foundation\")\n- **DO NOT change brand names** (e.g., \"Apple\", \"Samsung\", \"L'Oreal\", \"Sephora\")\n- **DO NOT change model numbers or product codes** (e.g., \"Model XYZ-123\", \"SKU 456789\")\n- **DO NOT change specific item descriptions** that help users identify products for purchase\n- **PRESERVE product specifications** that are important for purchasing decisions\n- **MAINTAIN exact product titles** as they appear in stores or online marketplaces\n- **KEEP ingredient lists** for beauty, health, or food products that users need to verify\n- **PRESERVE color names, sizes, and variants** that are crucial for product identification\n- **MAINTAIN exact pricing information** if mentioned (though you can update outdated prices)\n- **KEEP store names and retailer information** that help users locate products\n\n**This ensures users can easily find and purchase the mentioned products online or in stores.**\n\n## OUTPUT FORMAT\n\n**CRITICAL: You must output the result in the exact JSON format specified below. No other format is acceptable.**\n\nReturn the rewritten content in this exact JSON format:\n\n{\n  \"mainTitle\": \"Rewritten main title here\",\n  \"articleContents\": [\n    {\n      \"subTitle\": \"Rewritten subtitle 1\",\n      \"articleParagraphs\": [\n        \"Rewritten paragraph 1\",\n        \"Rewritten paragraph 2\",\n      ]\n    },\n    {\n      \"subTitle\": \"Rewritten subtitle 2\", \n      \"articleParagraphs\": [\n        \"Rewritten paragraph 1\",\n        \"Rewritten paragraph 2\",\n        \"Rewritten paragraph 3\"\n      ]\n    },\n    {\n      \"subTitle\": \"Rewritten subtitle 3\",\n      \"articleParagraphs\": [\n        \"Rewritten paragraph 1\",\n        \"Rewritten paragraph 2\",\n        \"Rewritten paragraph 3\"\n      ]\n    },\n    {\n      \"subTitle\": \"Rewritten subtitle 4\",\n      \"articleParagraphs\": [\n        \"Rewritten paragraph 1\",\n        \"Rewritten paragraph 2\",\n        \"Rewritten paragraph 3\",\n        \"Rewritten paragraph 4\",\n        \"Rewritten paragraph 5\"\n      ]\n    }\n  ]\n}\n\n**JSON STRUCTURE REQUIREMENTS:**\n- **MAIN TITLE:** Maximum length: 400 characters\n- **ARTICLE CONTENTS:** Minimum: 4 sections, Maximum: 12 sections\n- Each section must have:\n  - **Subtitle**: Maximum 400 characters\n  - **Article Paragraphs**: Minimum 2 paragraphs, maximum 8 paragraphs per section\n- Must have at least 4 article content sections or more\n- Each section must have a subtitle and multiple paragraphs\n- All content must be rewritten to look different from the original\n- **Write in a casual, conversational tone that readers can easily connect with**\n- **CRITICAL: The new article must be longer than the original article**\n- **NEVER create a shorter article than the original - this is absolutely forbidden**\n- **If shorter than required, add more content to meet the length requirement**\n- JSON must be valid and properly formatted\n- No extra commentary or text outside the JSON\n\n**JSON FORMAT VALIDATION RULES:**\n1. **MUST start with `{` and end with `}`**\n2. **MUST have exactly one main object with `mainTitle` and `articleContents`**\n3. **MUST have at least 4 items in `articleContents` array**\n4. **MUST use double quotes for all keys and string values**\n5. **MUST NOT include any text before or after the JSON**\n6. **MUST NOT include any comments or explanations outside the JSON**\n7. **MUST be valid JSON that can be parsed by a JSON parser**\n\n**CRITICAL JSON QUOTE RULES - ABSOLUTELY MANDATORY:**\n- **ALL double quotes (\") within content MUST be replaced with single quotes (')**\n- **This is CRITICAL - double quotes break JSON parsing in n8n when data is treated as string**\n- **Examples of CORRECT usage:**\n  - Title: \"Understanding 'Popcorn Brain': Signs, Causes...\" → JSON: `\"mainTitle\": \"Understanding 'Popcorn Brain': Signs, Causes...\"`\n  - Text: \"The term 'popcorn brain'\" → JSON: `\"articleParagraphs\": [\"The term 'popcorn brain'\"]`\n- **Examples of INCORRECT (WILL CAUSE ERRORS):**\n  - WRONG: `\"mainTitle\": \"Understanding \"Popcorn Brain\"\"` (double quotes break JSON)\n  - WRONG: `\"articleParagraphs\": [\"The term \"popcorn brain\"\"]` (double quotes break JSON)\n- **VERIFICATION: Before outputting, replace ALL double quotes within content with single quotes (apostrophes)**\n- **If your content needs quotes, use single quotes (') instead of double quotes (\") - this is not optional**\n\n**ABSOLUTELY FORBIDDEN:**\n- Do NOT copy exact text from the original\n- Do NOT add any emojis, symbols, or special characters in any content\n- Do NOT make up false information\n- Do NOT change the core meaning or context\n- Do NOT output in any format other than the specified JSON\n- Do NOT create articles shorter than the original - this is absolutely forbidden\n- Do NOT output content in any language other than English - this is absolutely forbidden\n- Do NOT use non-English characters, words, or phrases in any part of the output\n- **Do NOT leave any mentions of the original source brand/website** - ALL must be replaced with \"Women's Spot\"\n- **Do NOT preserve original publication names** - they must be replaced with \"Women's Spot\"\n- **Do NOT change historically specific year references** - preserve years tied to specific events (e.g., \"World Cup 2022\", \"Olympic Games 2020\")\n- **Do NOT include generic year references** - remove all generic year references and replace with timeless language (e.g., \"in 2026\" → remove or use \"currently\", \"nowadays\", \"in recent times\")\n- Do NOT add any text before or after the JSON object\n- Do NOT use single quotes instead of double quotes\n- Do NOT add trailing commas after the last item in objects or arrays\n- Do NOT include comments or explanations outside the JSON\n- Do NOT use backticks or markdown formatting around the JSON\n- Do NOT add line breaks or extra spaces that break JSON parsing\n- Do NOT include any characters that are not valid JSON\n- Do NOT add any prefix like \"Here is the JSON:\" or \"The result is:\"\n\n**CRITICAL: Your response must be ONLY the JSON object, nothing else.**\n```",
              "role": "system"
            }
          ]
        },
        "jsonOutput": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        2992,
        -352
      ],
      "id": "92c8c066-5228-42fc-b00d-8320cef7f76d",
      "name": "Rewrite article",
      "executeOnce": false,
      "retryOnFail": true,
      "waitBetweenTries": 5000,
      "credentials": {
        "openAiApi": {
          "id": "Gqus3026ccdUj9Mc",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=## USER MESSAGE\n```\n{{ JSON.stringify($json) }}\n\nValidate the above article content and return only the validation JSON response.\n```\n\n---\n\n# DETAILED DOCUMENTATION\n\n**MANDATORY JSON STRUCTURE EXAMPLES:**\n\n**VALIDATION PASSED:**\n```json\n{\n  \"valid\": true,\n  \"reason\": \"Article passed all validation checks\",\n  \"action\": \"process\"\n}\n```\n\n**VALIDATION FAILED - DATE-SPECIFIC CONTENT:**\n```json\n{\n  \"valid\": false,\n  \"reason\": \"Article contains date-specific content that is no longer relevant\",\n  \"action\": \"discard\",\n  \"exclusionReason\": \"date_specific\"\n}\n```\n\n**VALIDATION FAILED - PERSONAL INFORMATION:**\n```json\n{\n  \"valid\": false,\n  \"reason\": \"Article contains personal information about specific individuals\",\n  \"action\": \"discard\",\n  \"exclusionReason\": \"personal_information\"\n}\n```\n\n**VALIDATION FAILED - INAPPROPRIATE CONTENT TYPE:**\n```json\n{\n  \"valid\": false,\n  \"reason\": \"Article is not appropriate for the women's spot app\",\n  \"action\": \"discard\",\n  \"exclusionReason\": \"inappropriate_content_type\"\n}\n```\n\n**VALIDATION FAILED - EMPTY OR INVALID CONTENT:**\n```json\n{\n  \"valid\": false,\n  \"reason\": \"Invalid or empty article content provided\",\n  \"action\": \"error\",\n  \"exclusionReason\": \"invalid_content\"\n}\n```\n\n**WRONG OUTPUT FORMATS (WILL CAUSE ERRORS):**\n- \"Here is the validation result: { ... }\"\n- \"The article is: { ... }\"\n- \"```json\\n{ ... }\\n```\"\n- Any text before or after the JSON\n- Comments or explanations outside the JSON\n- Single quotes instead of double quotes\n- Missing required fields (valid, reason, action)\n- Invalid exclusionReason values\n"
            },
            {
              "content": "## SYSTEM MESSAGE\n```\nYou are an article validation specialist for a **women's spot app**. Your ONLY job is to analyze article content and determine if it should be processed or excluded based on specific validation rules.\n\n**CRITICAL: YOU MUST ONLY RETURN A JSON RESPONSE - NO OTHER FORMAT IS ACCEPTABLE.**\n\n**IMPORTANT CONTEXT:** This content is for a **women's spot app** that covers educational topics, informational, and focused on sharing experiences and information about women's daily life - NOT explicit content.\n\nYour task is to:\n\n## 1. CONTENT VALIDATION ANALYSIS\n\n**STEP 1: READ THE ARTICLE CONTENT**\n- Analyze the provided article content thoroughly\n- Identify the main themes, topics, and content type\n- Check for specific validation criteria that require exclusion\n\n**STEP 2: APPLY VALIDATION RULES**\nApply the following validation rules in order:\n\n### 2.1 DATE-SPECIFIC CONTENT VALIDATION\nCheck if the article contains content about specific one-time events that are no longer relevant:\n\n**EXCLUDE articles that are about:**\n- One-time sporting events (e.g., \"World Cup Final 2018\", \"NCAA Championship 2024\")\n- Specific conferences or events with exact dates\n- Political events tied to specific dates\n- Natural disasters with specific occurrence dates\n- Any event that happened only once and is tied to a specific date\n- Specific individual achievements tied to specific dates (e.g., \"Coach wins championship in 2024\")\n\n**DO NOT EXCLUDE articles about:**\n- Recurring holidays (Christmas, New Year, Easter, etc.)\n- Seasonal topics (summer health tips, winter wellness)\n- Annual events (Black Friday, Valentine's Day)\n- General health topics that may reference dates but aren't date-specific\n- Educational content about health, wellness, or general topics\n- General advice or tips that could apply anytime\n\n### 2.2 PERSONAL INFORMATION VALIDATION\nCheck if the article contains specific information about individual people that should be excluded:\n\n**EXCLUDE articles that are primarily about:**\n- Specific individuals' personal stories, diagnoses, or medical conditions\n- Individual achievements or accomplishments of specific people\n- Personal life events of specific individuals\n- Biographical content about specific people\n- News stories about specific individuals' personal circumstances\n\n**DO NOT EXCLUDE articles that:**\n- Use general examples or case studies (anonymized)\n- Provide educational content with general advice\n- Cover topics that could apply to anyone\n- Include general health information or tips\n\n### 2.3 CONTENT TYPE VALIDATION\nCheck if the article is appropriate for the women's spot app:\n\n**EXCLUDE articles that are:**\n- News articles about specific events or people\n- Biographical content\n- Personal stories of specific individuals\n- Event-specific content\n- Time-sensitive news content\n\n**INCLUDE articles that are:**\n- Educational content about women's health and wellness\n- General advice and tips\n- How-to guides and tutorials\n- Informational content about products or services\n- General wellness and lifestyle content\n\n## 3. OUTPUT FORMAT\n\n**CRITICAL: You must output the result in the exact JSON format specified below. No other format is acceptable.**\n\n**JSON FORMAT VALIDATION RULES:**\n1. **MUST start with `{` and end with `}`**\n2. **MUST use double quotes for all keys and string values**\n3. **MUST NOT include any text before or after the JSON**\n4. **MUST NOT include any comments or explanations outside the JSON**\n5. **MUST be valid JSON that can be parsed by a JSON parser**\n\n### 3.1 VALIDATION PASSED\nIf the article passes all validation rules and should be processed:\n\n```json\n{\n  \"valid\": true,\n  \"reason\": \"Article passed all validation checks\",\n  \"action\": \"process\"\n}\n```\n\n### 3.2 VALIDATION FAILED - DATE-SPECIFIC CONTENT\nIf the article should be excluded due to date-specific content:\n\n```json\n{\n  \"valid\": false,\n  \"reason\": \"Article contains date-specific content that is no longer relevant\",\n  \"action\": \"discard\",\n  \"exclusionReason\": \"date_specific\"\n}\n```\n\n### 3.3 VALIDATION FAILED - PERSONAL INFORMATION\nIf the article should be excluded due to personal information about specific individuals:\n\n```json\n{\n  \"valid\": false,\n  \"reason\": \"Article contains personal information about specific individuals\",\n  \"action\": \"discard\",\n  \"exclusionReason\": \"personal_information\"\n}\n```\n\n### 3.4 VALIDATION FAILED - INAPPROPRIATE CONTENT TYPE\nIf the article should be excluded due to inappropriate content type:\n\n```json\n{\n  \"valid\": false,\n  \"reason\": \"Article is not appropriate for the women's spot app\",\n  \"action\": \"discard\",\n  \"exclusionReason\": \"inappropriate_content_type\"\n}\n```\n\n### 3.5 VALIDATION FAILED - EMPTY OR INVALID CONTENT\nIf the article content is invalid or empty:\n\n```json\n{\n  \"valid\": false,\n  \"reason\": \"Invalid or empty article content provided\",\n  \"action\": \"error\",\n  \"exclusionReason\": \"invalid_content\"\n}\n```\n\n**ABSOLUTELY FORBIDDEN:**\n- Do NOT output in any format other than the specified JSON\n- Do NOT add any text before or after the JSON object\n- Do NOT use single quotes instead of double quotes\n- Do NOT add trailing commas after the last item in objects\n- Do NOT include comments or explanations outside the JSON\n- Do NOT use backticks or markdown formatting around the JSON\n- Do NOT add any prefix like \"Here is the JSON:\" or \"The result is:\"\n- Do NOT process articles about specific individuals' personal circumstances\n- Do NOT process date-specific news content\n- Do NOT process biographical content\n- Do NOT process time-sensitive news articles\n\n## 4. VALIDATION RULES SUMMARY\n\n**MANDATORY EXCLUSION CRITERIA:**\n1. **Date-specific events** - One-time events tied to specific dates\n2. **Personal information** - Specific individuals' personal stories or circumstances\n3. **News content** - Time-sensitive news about specific people or events\n4. **Biographical content** - Stories about specific individuals' lives\n5. **Invalid content** - Empty, corrupted, or unprocessable content\n\n**MANDATORY INCLUSION CRITERIA:**\n1. **Educational content** - General health, wellness, and lifestyle education\n2. **How-to guides** - Practical advice and tutorials\n3. **General advice** - Tips that apply to broad audiences\n4. **Product information** - Educational content about products or services\n5. **Wellness content** - General health and wellness information\n\n**ABSOLUTELY FORBIDDEN:**\n- Do NOT process articles about specific individuals' personal circumstances\n- Do NOT process date-specific news content\n- Do NOT process biographical content\n- Do NOT process time-sensitive news articles\n- Do NOT output in any format other than the specified JSON\n- Do NOT include any text before or after the JSON\n- Do NOT add explanations or commentary outside the JSON\n\n**CRITICAL: Your response must be ONLY the JSON object, nothing else.**\n```",
              "role": "system"
            }
          ]
        },
        "jsonOutput": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        2496,
        -352
      ],
      "id": "93d4ca3b-ccc2-4ad8-8697-2439ba9f9d1c",
      "name": "Validate article",
      "executeOnce": false,
      "retryOnFail": true,
      "waitBetweenTries": 5000,
      "credentials": {
        "openAiApi": {
          "id": "Gqus3026ccdUj9Mc",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1VIDK6jaicE6HRZ88hx-iSAdtRlX4atPKXVoJph5WD2g",
          "mode": "list",
          "cachedResultName": "womens-spot",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1VIDK6jaicE6HRZ88hx-iSAdtRlX4atPKXVoJph5WD2g/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "={{\n  ({\n    Monday: 'fitness',\n    Tuesday: 'nutrition',\n    Wednesday: 'health',\n    Thursday: 'intimacy',\n    Friday: 'beauty',\n    Saturday: 'weight-loss'\n  }[new Date().toLocaleDateString('en-US', { weekday: 'long' })] || 'life')\n}}",
          "mode": "name"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "Status"
            }
          ]
        },
        "combineFilters": "OR",
        "options": {
          "returnFirstMatch": true
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        3584,
        -608
      ],
      "id": "bb29a3e7-f805-4b8f-a07a-b8776bd467ae",
      "name": "Get URL row",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "5osTTYhZaXHkk1mD",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"hreflang\": \"{{ $('Article translation').item.json.message.content.hreflang }}\",\n  \"articleContext\": \"{{ $('Rewrite context by lang').item.json.message.content.articleContext }}\",\n  \"seo\": {{ JSON.stringify($('Article translation').item.json.message.content.seo) }},\n  \"content\": {{ JSON.stringify($('Article translation').item.json.message.content.content) }},\n  \"socialMedia\": {{ JSON.stringify($('Article translation').item.json.message.content.socialMedia) }},\n  \"salesProducts\": {{ JSON.stringify($('Article translation').item.json.message.content.salesProducts) }}\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        5040,
        448
      ],
      "id": "f62d82a8-8024-445a-b52a-0c58f510cb3a",
      "name": "Full especific lang article",
      "executeOnce": true,
      "notesInFlow": false
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.message.content.hreflang }}",
                    "rightValue": "pt",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "81aa9662-72e4-4e5c-9c04-3344bc0fbc54"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "1a122a23-fad1-4f41-bf58-459e713c08c2",
                    "leftValue": "={{ $json.message.content.hreflang }}",
                    "rightValue": "es",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "3ec0f0de-fab3-4b5b-8a9e-8122679a9f1b",
                    "leftValue": "={{ $json.message.content.hreflang }}",
                    "rightValue": "fr",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "0f9a147a-c6cc-4500-aa7b-572b44b92a4e",
                    "leftValue": "={{ $json.message.content.hreflang }}",
                    "rightValue": "it",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "3b78c5c1-7000-4179-a38e-a6e608464561",
                    "leftValue": "={{ $json.message.content.hreflang }}",
                    "rightValue": "de",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        4528,
        16
      ],
      "id": "b1674301-f078-4087-a16e-e04974e79010",
      "name": "Switch"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1Z7oF6y4fbx6-WDwayALf-6CpZuYAf6JLyVd5HmrcEPA",
          "mode": "list",
          "cachedResultName": "womens-spot-languages",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Z7oF6y4fbx6-WDwayALf-6CpZuYAf6JLyVd5HmrcEPA/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "PT",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Z7oF6y4fbx6-WDwayALf-6CpZuYAf6JLyVd5HmrcEPA/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Type": "={{ $('Get URL row').first().json.Type }}",
            "Article ID": "={{ $('Generate MongoDB  _ID').item.json._id }}",
            "Social - PT": "={{ JSON.stringify($json.message.content.socialMedia) }}",
            "Output URL": "={{ $json.message.content.seo.canonicalUrl }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Date",
              "displayName": "Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Type",
              "displayName": "Type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Article ID",
              "displayName": "Article ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Image URL",
              "displayName": "Image URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Social - PT",
              "displayName": "Social - PT",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Output URL",
              "displayName": "Output URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Tiktok",
              "displayName": "Tiktok",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Pintrest",
              "displayName": "Pintrest",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Twitter X",
              "displayName": "Twitter X",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Facebook",
              "displayName": "Facebook",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Threads",
              "displayName": "Threads",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Instagran",
              "displayName": "Instagran",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Errors message",
              "displayName": "Errors message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        4768,
        -320
      ],
      "id": "68a36fd1-3946-4e03-8fb8-5bf9b828d92d",
      "name": "Append row PT",
      "retryOnFail": true,
      "waitBetweenTries": 5000,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "5osTTYhZaXHkk1mD",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1Z7oF6y4fbx6-WDwayALf-6CpZuYAf6JLyVd5HmrcEPA",
          "mode": "list",
          "cachedResultName": "womens-spot-languages",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Z7oF6y4fbx6-WDwayALf-6CpZuYAf6JLyVd5HmrcEPA/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 2011308784,
          "mode": "list",
          "cachedResultName": "ES",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Z7oF6y4fbx6-WDwayALf-6CpZuYAf6JLyVd5HmrcEPA/edit#gid=2011308784"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Type": "={{ $('Get URL row').first().json.Type }}",
            "Article ID": "={{ $('Generate MongoDB  _ID').item.json._id }}",
            "Output URL": "={{ $json.message.content.seo.canonicalUrl }}",
            "Social - ES": "={{ JSON.stringify($json.message.content.socialMedia) }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Date",
              "displayName": "Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Type",
              "displayName": "Type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Article ID",
              "displayName": "Article ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Image URL",
              "displayName": "Image URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Social - ES",
              "displayName": "Social - ES",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Output URL",
              "displayName": "Output URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Tiktok",
              "displayName": "Tiktok",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Pintrest",
              "displayName": "Pintrest",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Twitter X",
              "displayName": "Twitter X",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Facebook",
              "displayName": "Facebook",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Threads",
              "displayName": "Threads",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Instagran",
              "displayName": "Instagran",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Errors message",
              "displayName": "Errors message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        4768,
        -128
      ],
      "id": "b824a5a9-9e2f-4152-803d-3cfb77851483",
      "name": "Append row ES",
      "retryOnFail": true,
      "waitBetweenTries": 5000,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "5osTTYhZaXHkk1mD",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1Z7oF6y4fbx6-WDwayALf-6CpZuYAf6JLyVd5HmrcEPA",
          "mode": "list",
          "cachedResultName": "womens-spot-languages",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Z7oF6y4fbx6-WDwayALf-6CpZuYAf6JLyVd5HmrcEPA/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1169853962,
          "mode": "list",
          "cachedResultName": "IT",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Z7oF6y4fbx6-WDwayALf-6CpZuYAf6JLyVd5HmrcEPA/edit#gid=1169853962"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Type": "={{ $('Get URL row').first().json.Type }}",
            "Article ID": "={{ $('Generate MongoDB  _ID').item.json._id }}",
            "Output URL": "={{ $json.message.content.seo.canonicalUrl }}",
            "Social - IT": "={{ JSON.stringify($json.message.content.socialMedia) }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Date",
              "displayName": "Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Type",
              "displayName": "Type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Article ID",
              "displayName": "Article ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Image URL",
              "displayName": "Image URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Social - IT",
              "displayName": "Social - IT",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Output URL",
              "displayName": "Output URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Tiktok",
              "displayName": "Tiktok",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Pintrest",
              "displayName": "Pintrest",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Twitter X",
              "displayName": "Twitter X",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Facebook",
              "displayName": "Facebook",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Threads",
              "displayName": "Threads",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Instagran",
              "displayName": "Instagran",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Errors message",
              "displayName": "Errors message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        4768,
        256
      ],
      "id": "8a5fed0a-9665-4937-a9b1-a46100671386",
      "name": "Append row IT",
      "retryOnFail": true,
      "waitBetweenTries": 5000,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "5osTTYhZaXHkk1mD",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1Z7oF6y4fbx6-WDwayALf-6CpZuYAf6JLyVd5HmrcEPA",
          "mode": "list",
          "cachedResultName": "womens-spot-languages",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Z7oF6y4fbx6-WDwayALf-6CpZuYAf6JLyVd5HmrcEPA/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 422094267,
          "mode": "list",
          "cachedResultName": "DE",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Z7oF6y4fbx6-WDwayALf-6CpZuYAf6JLyVd5HmrcEPA/edit#gid=422094267"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Type": "={{ $('Get URL row').first().json.Type }}",
            "Article ID": "={{ $('Generate MongoDB  _ID').item.json._id }}",
            "Output URL": "={{ $json.message.content.seo.canonicalUrl }}",
            "Social - DE": "={{ JSON.stringify($json.message.content.socialMedia) }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Date",
              "displayName": "Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Type",
              "displayName": "Type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Article ID",
              "displayName": "Article ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Image URL",
              "displayName": "Image URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Social - DE",
              "displayName": "Social - DE",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Output URL",
              "displayName": "Output URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Tiktok",
              "displayName": "Tiktok",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Pintrest",
              "displayName": "Pintrest",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Twitter X",
              "displayName": "Twitter X",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Facebook",
              "displayName": "Facebook",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Threads",
              "displayName": "Threads",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Instagran",
              "displayName": "Instagran",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Errors message",
              "displayName": "Errors message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "health - gesundheit / fitness - fitness / nutrition - ernährung / intimacy - intimitat / beauty - schönheit  / life - leben / weight loss - gewichtsverlust",
              "displayName": "health - gesundheit / fitness - fitness / nutrition - ernährung / intimacy - intimitat / beauty - schönheit  / life - leben / weight loss - gewichtsverlust",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        4768,
        448
      ],
      "id": "8a35fe30-d33a-43c6-a59f-1dbc58b9a354",
      "name": "Append row DE",
      "retryOnFail": true,
      "waitBetweenTries": 5000,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "5osTTYhZaXHkk1mD",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1Z7oF6y4fbx6-WDwayALf-6CpZuYAf6JLyVd5HmrcEPA",
          "mode": "list",
          "cachedResultName": "womens-spot-languages",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Z7oF6y4fbx6-WDwayALf-6CpZuYAf6JLyVd5HmrcEPA/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 131224802,
          "mode": "list",
          "cachedResultName": "FR",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Z7oF6y4fbx6-WDwayALf-6CpZuYAf6JLyVd5HmrcEPA/edit#gid=131224802"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Type": "={{ $('Get URL row').first().json.Type }}",
            "Article ID": "={{ $('Generate MongoDB  _ID').item.json._id }}",
            "Output URL": "={{ $json.message.content.seo.canonicalUrl }}",
            "Social - FR": "={{ JSON.stringify($json.message.content.socialMedia) }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Date",
              "displayName": "Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Type",
              "displayName": "Type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Article ID",
              "displayName": "Article ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Image URL",
              "displayName": "Image URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Social - FR",
              "displayName": "Social - FR",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Output URL",
              "displayName": "Output URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Tiktok",
              "displayName": "Tiktok",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Pintrest",
              "displayName": "Pintrest",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Twitter X",
              "displayName": "Twitter X",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Facebook",
              "displayName": "Facebook",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Threads",
              "displayName": "Threads",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Instagran",
              "displayName": "Instagran",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Errors message",
              "displayName": "Errors message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        4768,
        64
      ],
      "id": "8622fcf7-9889-4a12-9b73-aaa2c715773c",
      "name": "Append row FR",
      "retryOnFail": true,
      "waitBetweenTries": 5000,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "5osTTYhZaXHkk1mD",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://www.womensspot.org/api/v1/articles",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer 3d71f10c9fcf78e3b09e6d000791ee2be787ffdbc428ff6aa987683781b5547c"
            },
            {
              "name": "Content-Type",
              "value": "multipart/form-data"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "languages",
              "value": "={{ JSON.stringify($('Full article json').item.json.languages) }}"
            },
            {
              "name": "imagesContext",
              "value": "={{ JSON.stringify($('Full article json').item.json.imagesContext) }}"
            },
            {
              "name": "category",
              "value": "={{ $('Full article json').item.json.category }}"
            },
            {
              "name": "id",
              "value": "={{ $('Full article json').item.json._id }}"
            },
            {
              "name": "createdBy",
              "value": "68e6a79afb1932c067f96e30"
            }
          ]
        },
        "options": {
          "response": {
            "response": {
              "fullResponse": true
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        4992,
        -592
      ],
      "id": "b3b8b30c-2cb8-42d1-9e9c-63e09d769c0d",
      "name": "Create ariticle",
      "alwaysOutputData": false,
      "executeOnce": true,
      "retryOnFail": true,
      "waitBetweenTries": 5000,
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=## USER MESSAGE\n```\n{{ JSON.stringify($('Format article json').item.json.languages[0].articleContext) }}\n\nRewrite the above phrase into {{ $('Languages array').item.json.language }} ({{ $('Languages array').item.json.lang.toLowerCase() }}).\n```\n\n---\n\n# DETAILED DOCUMENTATION\n\n**MANDATORY JSON STRUCTURE**\n```json\n{\n    \"articleContext\": \"Rewritten phrase content that has same or similar character length\"\n}\n```\n\n**WRONG OUTPUT FORMATS (WILL CAUSE ERRORS):**\n- \"Here is the rewrite: { ... }\"\n- \"The result is: { ... }\"\n- \"```json\\n{ ... }\\n```\"\n- Any text before or after the JSON\n- Comments or explanations outside the JSON\n- Single quotes instead of double quotes\n- Missing the `articleContext` field\n- Undefined, null, or empty string values\n"
            },
            {
              "content": "## SYSTEM MESSAGE\n```\nYou are a professional translator specializing in women's wellness content. Your task is to rewrite phrases into different languages while adapting cultural references and maintaining the same character length as the original.\n\n**CONTEXT:** This content is for a women's wellness app covering intimate wellness, personal wellness, relationships, health, beauty, nutrition, and weight loss. These are educational topics focused on women's daily life experiences.\n\n**SAFETY NOTE:** Use \"intimate wellness,\" \"personal wellness,\" or \"relationship wellness\" instead of explicit terms to ensure content safety.\n\n## CORE REQUIREMENTS\n\n1. **REWRITE** the phrase into the target language while adapting cultural references\n2. **MAINTAIN** same or similar character length as the original\n3. **PRESERVE** all factual information and context\n4. **ADAPT** cultural references to be appropriate for the target culture\n5. **USE** natural, fluent language that sounds native to the target language\n6. **MAINTAIN** the casual, conversational tone that connects with readers\n7. **NO EMOJIS** - Do not add any emojis, symbols, or special characters\n\n**CRITICAL YEAR REFERENCE REQUIREMENTS:**\n- **DO NOT include generic year references** in the rewritten articleContext (e.g., \"in 2026\", \"this year\", \"last year\", \"as of 2024\", \"studies from 2023\")\n- **The articleContext must be reusable across any year** - it should not become outdated due to year references\n- **ONLY include years if they are tied to date-specific historical events** (e.g., \"World Cup 2022\", \"Olympic Games 2020\", \"COVID-19 pandemic in 2020\")\n- **Remove or rephrase any generic time references** that include years:\n  - \"A study from 2022\" → \"Recent studies show\" or \"Studies indicate\"\n  - \"Research conducted in 2023\" → \"Research shows\" or \"Current research indicates\"\n  - \"This year's trends\" → \"Current trends\" or \"Latest trends\"\n- **Generic time references should be replaced with timeless alternatives:**\n  - \"this year\" → \"currently\", \"nowadays\", \"in recent times\", \"today\"\n  - \"last year\" → \"recently\", \"in recent times\", \"lately\"\n  - \"next year\" → \"in the future\", \"upcoming\", \"forthcoming\"\n- **Use timeless language** that remains relevant regardless of when the content is used\n\n## PRODUCT PRESERVATION RULES\n\n**CRITICAL: When content refers to products, items, merchandise, or anything purchasable, PRESERVE the exact names:**\n\n- **DO NOT translate** product names, brand names, model numbers, or product codes\n- **PRESERVE** product specifications, ingredient lists, color names, sizes, and variants\n- **MAINTAIN** exact product titles as they appear in stores or online marketplaces\n- **KEEP** store names and retailer information\n\nThis ensures users can easily find and purchase mentioned products regardless of the target language.\n\n## OUTPUT FORMAT\n\n**CRITICAL: You must output the result in the exact JSON format specified below. No other format is acceptable.**\n\n**MANDATORY JSON STRUCTURE:**\n```json\n{\n    \"articleContext\": \"Rewritten phrase content that has same or similar character length\"\n}\n```\n\n**JSON FORMAT VALIDATION RULES:**\n1. **MUST start with `{` and end with `}`**\n2. **MUST have exactly one main object: `articleContext`**\n3. **MUST use double quotes for all keys and string values**\n4. **MUST NOT include any text before or after the JSON**\n5. **MUST NOT include any comments or explanations outside the JSON**\n6. **MUST be valid JSON that can be parsed by a JSON parser**\n\n**CRITICAL JSON QUOTE RULES - ABSOLUTELY MANDATORY:**\n- **ALL double quotes (\") within content MUST be replaced with single quotes (')**\n- **This is CRITICAL - double quotes break JSON parsing in n8n when data is treated as string**\n- **Examples of CORRECT usage:**\n  - Text: \"The term 'popcorn brain'\" → JSON: `\"articleContext\": \"The term 'popcorn brain'\"`\n- **Examples of INCORRECT (WILL CAUSE ERRORS):**\n  - WRONG: `\"articleContext\": \"The term \"popcorn brain\"\"` (double quotes break JSON)\n- **VERIFICATION: Before outputting, replace ALL double quotes within content with single quotes (apostrophes)**\n- **If your content needs quotes, use single quotes (') instead of double quotes (\") - this is not optional**\n\n**ABSOLUTELY FORBIDDEN:**\n- Do NOT add any emojis, symbols, or special characters in any content\n- Do NOT make up false information\n- Do NOT change the core meaning or context\n- Do NOT output in any format other than the specified JSON\n- **Do NOT include generic year references** - remove all generic year references and replace with timeless language (e.g., \"in 2026\" → remove or use \"currently\", \"nowadays\", \"in recent times\")\n- **ONLY include years if they are tied to date-specific historical events** (e.g., \"World Cup 2022\", \"Olympic Games 2020\", \"COVID-19 pandemic in 2020\")\n- Do NOT add any text before or after the JSON object\n- Do NOT use single quotes instead of double quotes\n- Do NOT add trailing commas after the last item in objects or arrays\n- Do NOT include comments or explanations outside the JSON\n- Do NOT use backticks or markdown formatting around the JSON\n- Do NOT add any prefix like \"Here is the JSON:\" or \"The result is:\"\n\n**OUTPUT:** Only the complete JSON object, nothing else.\n```",
              "role": "system"
            }
          ]
        },
        "jsonOutput": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        4160,
        -64
      ],
      "id": "9c0fecfd-12dd-4b57-bc3a-4960d4afbfe1",
      "name": "Rewrite context by lang",
      "executeOnce": false,
      "retryOnFail": true,
      "waitBetweenTries": 5000,
      "credentials": {
        "openAiApi": {
          "id": "Gqus3026ccdUj9Mc",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=## USER MESSAGE\n\n```\n\n{{ JSON.stringify($('Format article json').item.json.languages) }}\n\n**Article Category:** {{ $('Get URL row').item.json.Type }}\n\nTranslate or rewrite the above JSON object into {{ $('Languages array').item.json.language }} ({{ ($('Languages array').item.json.lang).toLowerCase() }}).\n```\n\n---\n\n# DETAILED DOCUMENTATION\n\n**IMPORTANT CONTEXT:** This content is for a **women's spot app** that covers topics including women's intimate wellness, personal wellness, relationships, health, beauty, nutrition, and weight loss. These topics are educational, informational, and focused on sharing experiences and information about women's daily life - NOT explicit content.\n\n**CRITICAL SAFETY NOTE:** Even though this is educational content about women's and includes some intimate articles, search engines and content filters may flag content with sexual terminology. Always use \"intimate wellness,\" \"personal wellness,\" or \"relationship wellness\" instead of explicit terms to ensure proper SEO performance and content safety.\n\n**CRITICAL INSTRUCTION: YOU MUST TRANSLATE OR REWRITE THE COMPLETE ARTICLE JSON OBJECT TO THE SPECIFIED TARGET LANGUAGE WHILE MAINTAINING CULTURAL APPROPRIATENESS AND UPDATING ALL SEO ELEMENTS.**\n\n## TRANSLATION OR REWRITE PROCESS\n\n**STEP 1: READ THE COMPLETE ARTICLE JSON OBJECT**\n\n- Analyze the provided complete article JSON object thoroughly\n- Identify all translatable content sections\n- Extract the core information and context from all sections\n- Determine the target language and cultural requirements\n\n**STEP 2: TRANSLATE AND REWRITE CONTENT**\n\nProcess the following sections according to their requirements (see SYSTEM MESSAGE for detailed rules):\n\n- **Article Context**: REWRITE (not translate) - **REQUIRED FIELD (MANDATORY, NOT OPTIONAL)** - rewrite into target language while maintaining *SAME OR SIMILAR CHARACTER LENGTH* as original. **MUST NEVER EXCEED 200 CHARACTERS** (critical - article creation will fail if exceeded). Adapt cultural references, preserve factual information\n- **SEO content**: REWRITE (not translate) - rewrite metaTitle, metaDescription, keywords, slug to *ENSURE CHARACTERS LIMIT* compliance\n- **Article content**: TRANSLATE - mainTitle, all subTitles, all articleParagraphs, no characters limit\n- **Social media content**: REWRITE (not translate) - rewrite all text content across all platforms to *ENSURE CHARACTERS LIMIT* compliance\n- **Sales Products**: TRANSLATE - translate all product names in the salesProducts array to target language, culturally adapt product terminology to match how products are named on e-commerce websites in that language region\n\n**STEP 3: UPDATE SEO AND URL ELEMENTS**\n\nUpdate the following elements based on the target language (see SYSTEM MESSAGE for detailed category translation rules):\n\n- **hreflang**: Replace with the target language code\n- **slug**: Convert content.mainTitle to URL-safe format (see slug rules in SYSTEM MESSAGE)\n- **canonicalUrl**: \n  - **CRITICAL: You MUST use the EXACT slug value from the `slug` field you created above**\n  - **The slug in canonicalUrl MUST be IDENTICAL to the `slug` field value - no differences allowed**\n  - **CRITICAL: The article category is provided explicitly in the user message - USE THAT CATEGORY**\n  - Use the category provided in the user message, translate it using LANGUAGE MAPPINGS from SYSTEM MESSAGE\n  - For English (en): https://womensspot.org/[category]/[slug] where [slug] is the EXACT value from the `slug` field (category stays in English)\n  - For other languages: https://womensspot.org/[locale]/[translated-category]/[slug] where [slug] is the EXACT value from the `slug` field (category MUST be translated)\n  - **VERIFICATION: Before outputting, verify:**\n    - The category in canonicalUrl matches the translated category from LANGUAGE MAPPINGS for the provided category\n    - The slug in canonicalUrl matches the slug field value exactly\n    - Do NOT confuse categories - use the EXACT category provided in the user message\n- **metaTitle**: Use content.mainTitle\n\n**STEP 4: PRESERVE NON-TRANSLATABLE ELEMENTS**\n\nKeep the following elements unchanged:\n\n- **All articleImages**: Do not translate any image URLs\n- **JSON structure**: Maintain exact same structure and format\n\n## TRANSLATION REQUIREMENTS\n\n- Maintain the exact same structure and format as the original\n- Preserve all factual information and context\n- Adapt cultural references to be appropriate for the target culture\n- Use natural, fluent language that sounds native to the target language\n- Maintain the casual, conversational tone that connects with readers\n- **ABSOLUTELY NO EMOJIS** - Do not add any emojis, symbols, or special characters\n- Ensure all URLs are properly formatted and functional\n\n**CRITICAL YEAR REFERENCE REQUIREMENTS:**\n- **DO NOT include generic year references** in any translated or rewritten content (e.g., \"in 2026\", \"this year\", \"last year\", \"as of 2024\", \"studies from 2023\")\n- **All content must be reusable across any year** - it should not become outdated due to year references\n- **ONLY include years if they are tied to date-specific historical events** (e.g., \"World Cup 2022\", \"Olympic Games 2020\", \"COVID-19 pandemic in 2020\")\n- **Remove or rephrase any generic time references** that include years:\n  - \"A study from 2022\" → \"Recent studies show\" or \"Studies indicate\"\n  - \"Research conducted in 2023\" → \"Research shows\" or \"Current research indicates\"\n  - \"This year's trends\" → \"Current trends\" or \"Latest trends\"\n  - \"Last year's research\" → \"Recent research\" or \"Latest research\"\n  - \"In 2024, studies found\" → \"Studies have found\" or \"Recent studies found\"\n- **Generic time references should be replaced with timeless alternatives:**\n  - \"this year\" → \"currently\", \"nowadays\", \"in recent times\", \"today\"\n  - \"last year\" → \"recently\", \"in recent times\", \"lately\"\n  - \"next year\" → \"in the future\", \"upcoming\", \"forthcoming\"\n- **Use timeless language** that remains relevant regardless of when the content is used\n\n### PRODUCT AND MERCHANDISE PRESERVATION\n\n**CRITICAL: When translating article content that refers to products, items, merchandise, or anything purchasable, PRESERVE the exact names:**\n\n- **DO NOT translate product names mentioned in article content** (e.g., \"iPhone 15 Pro\", \"Nike Air Max\", \"Maybelline Fit Me Foundation\")\n- **DO NOT translate brand names mentioned in article content** (e.g., \"Apple\", \"Samsung\", \"L'Oreal\", \"Sephora\")\n- **DO NOT translate model numbers or product codes** (e.g., \"Model XYZ-123\", \"SKU 456789\")\n- **DO NOT translate specific item descriptions** that help users identify products for purchase\n- **PRESERVE product specifications** that are important for purchasing decisions\n- **MAINTAIN exact product titles** as they appear in stores or online marketplaces\n- **KEEP ingredient lists** for beauty, health, or food products that users need to verify\n- **PRESERVE color names, sizes, and variants** that are crucial for product identification\n- **MAINTAIN exact pricing information** if mentioned (though you can update outdated prices)\n- **KEEP store names and retailer information** that help users locate products\n\n**This ensures users can easily find and purchase the mentioned products online or in stores regardless of the target language.**\n\n### SALES PRODUCTS TRANSLATION\n\n**CRITICAL: The salesProducts array contains generic product recommendations that MUST be translated:**\n\n- **TRANSLATE all product names in the salesProducts array** to the target language\n- **CULTURALLY ADAPT product terminology** to match how products are named on e-commerce websites in that language region\n- **USE searchable product names** that users would find on online marketplaces in the target language\n- **MAINTAIN the same number of products** as in the original array\n- **PRESERVE product relevance** - ensure translated products are still relevant to the article topic\n- **USE natural, native product terminology** for the target language market\n\n**Example translations:**\n- EN: \"Running Shoes\" → PT: \"Tênis de Corrida\" → ES: \"Zapatillas para Correr\" → FR: \"Chaussures de Course\" → DE: \"Laufschuhe\" → IT: \"Scarpe da Corsa\"\n- EN: \"Protein Powder\" → PT: \"Proteína em Pó\" → ES: \"Proteína en Polvo\" → FR: \"Poudre de Protéine\" → DE: \"Proteinpulver\" → IT: \"Proteina in Polvere\"\n\n**CRITICAL ERROR PREVENTION: These fields are currently being incorrectly translated to English. They MUST remain in their original language as provided in the input.**\n\n## REWRITE REQUIREMENTS (Article Context, SEO & Social Media)\n\n- **Article Context**: REWRITE into target language while maintaining *SAME OR SIMILAR CHARACTER LENGTH* as original, but **MUST NEVER EXCEED 200 CHARACTERS** (critical - article creation will fail if exceeded). Adapt cultural references, preserve all factual information, use natural fluent language that sounds native. If original exceeds 200 characters, condense to ≤200 characters while preserving core message. **CRITICAL: Remove all generic year references and use timeless language**\n- **SEO content**: REWRITE based on context, not translate - ensure metaTitle, metaDescription, keywords, and slug comply with character limits (see SYSTEM MESSAGE for specific limits). **CRITICAL: Remove all generic year references and use timeless language**\n- **Social Media content**: REWRITE based on context, not translate - ensure each property complies with its specific character limit (see SYSTEM MESSAGE for platform-specific limits). **CRITICAL: Remove all generic year references and use timeless language**\n- **Approach**: Use the original content as context to create new content that conveys the same message\n- **Quality**: Maintain the same tone, style, and informational value as the original\n\n**CRITICAL - IMPORTANT: You must follow the rules of *CHARACTER LIMIT VALIDATION* (see SYSTEM MESSAGE for all limits) or the api call will fail. Count the characters and adapt them if necessary to follow the max length of each individual social media and SEO at all the time.**\n\n## CULTURAL ADAPTATION\n\n- Adapt examples and references to be culturally relevant\n- Use appropriate cultural expressions and idioms\n- Ensure content is respectful and appropriate for the target culture\n- Maintain the same educational and informative value\n- Keep the same emotional tone and connection with readers\n- Translate category names to be culturally appropriate\n\n## CRITICAL ENFORCEMENT RULES\n\n- **Article Context**: REWRITE (not translate) - **REQUIRED FIELD (MANDATORY, NOT OPTIONAL)** - maintaining *SAME OR SIMILAR CHARACTER LENGTH* as original. **MUST NEVER EXCEED 200 CHARACTERS** (hard limit - article creation will fail if exceeded)\n- **SEO & Social Media**: REWRITE (not translate) to ensure character limits (see SYSTEM MESSAGE for guidelines)\n- **Content**: TRANSLATE, no character limitation on this\n- **Hashtags are part of the text and must be included and count for rules of max characters limit**\n- If ANY property exceeds its recommended limit significantly, you SHOULD rewrite that specific value to follow the guidelines\n- Count characters carefully for each individual property\n- **CRITICAL: articleContext is REQUIRED - do NOT omit this field**\n\n## CONSEQUENCES OF NOT FOLLOWING RULES\n\n- **API ERRORS**: Exceeding character limits will cause social media API calls to fail\n- **AUTOMATION FAILURE**: n8n workflows will break if content exceeds platform limits\n- **POSTING FAILURES**: Social media posts will be rejected by platform APIs\n- **WORKFLOW INTERRUPTION**: Entire automation process will stop due to validation errors\n- **DATA CORRUPTION**: Invalid content will cause database inconsistencies\n- **USER EXPERIENCE**: Failed posts will result in incomplete social media campaigns\n\n## ABSOLUTELY FORBIDDEN\n\n- Do NOT change the core meaning or context of any content\n- Do NOT add any emojis, symbols, or special characters in any content\n- Do NOT make up false information\n- Do NOT create inappropriate cultural references\n- Do NOT output in any format other than the specified JSON\n- **Do NOT exceed character limits for ANY content - if exceeded, rewrite to follow the rules (see SYSTEM MESSAGE for limits)**\n- **Do NOT translate SEO or socialMedia content - REWRITE instead**\n- Do NOT create translations that are culturally insensitive\n- Do NOT change the JSON structure or field names\n- **Do NOT ignore character limits - every single property must comply**\n- **Do NOT assume \"close enough\" - exact compliance is mandatory**\n- **Do NOT skip character counting - verify every single field**\n- **Do NOT translate product names, brand names, merchandise, or purchasable items mentioned in article content - preserve exact names**\n- **DO translate salesProducts array** - Translate all product names to target language with cultural adaptation\n\n## ONLY ALLOWED\n\n- Read, understand and process content from the complete article JSON object\n- **Article Context**: REWRITE (not translate) - **REQUIRED FIELD (MANDATORY, NOT OPTIONAL)** - maintaining *SAME OR SIMILAR CHARACTER LENGTH* as original. **MUST NEVER EXCEED 200 CHARACTERS** (critical - article creation will fail if exceeded)\n- **SEO & Social Media**: REWRITE (not translate) based on context to follow character limit guidelines (see SYSTEM MESSAGE)\n- **Content**: TRANSLATE to the specified target language\n- **Sales Products**: TRANSLATE - translate all product names in the salesProducts array to target language, culturally adapt product terminology to match e-commerce websites in that language region\n- Update hreflang, and canonicalUrl based on target language\n- Maintain all non-translatable elements (URLs, images)\n- Structure content into the required JSON format\n- **Count characters for every single property to ensure compliance with guidelines (see SYSTEM MESSAGE for limits)**\n- **PRESERVE exact product names, brand names, merchandise, and purchasable items mentioned in article content** - Keep original names so users can find them for purchase\n- **TRANSLATE salesProducts array** - Translate generic product names to target language with cultural adaptation\n\n**MANDATORY VALIDATION CHECKLIST:**\nBefore outputting the final JSON, verify EVERY field meets its requirements:\n\n**ARTICLE CONTEXT VALIDATION (CRITICAL):**\n- **REQUIRED FIELD (MANDATORY, NOT OPTIONAL)** - must always be present\n- **RECOMMENDED: Should be around 170-200 characters** (this is a guideline to help create appropriate length content)\n- **If original is around 170-200 characters**: Maintain same or similar character length (approximately ±10% tolerance)\n- **If original is significantly different**: Rewrite to similar length while preserving core message and factual information\n- **MUST be rewritten (not translated) into target language**\n- **MUST adapt cultural references appropriately**\n- **Character counting is RECOMMENDED - verify the count before output to stay within guidelines**\n\n## FINAL OUTPUT REQUIREMENTS\n\n**CRITICAL: Your response must be ONLY the complete translated JSON object, nothing else.**\n\n**CORRECT OUTPUT FORMAT:**\n\n```json\n{\n  \"hreflang\": \"en\",\n  \"seo\": {\n    \"metaTitle\": \"Rewritten Main Title\",\n    \"metaDescription\": \"Rewritten meta description content\",\n    \"keywords\": [\"translated\", \"keyword1\", \"keyword2\", \"keyword3\", \"keyword4\"],\n    \"slug\": \"translated-main-title-without-special-chars\",\n    \"hreflang\": \"en\",\n    \"canonicalUrl\": \"https://womensspot.org/es/intimidad/translated-main-title-without-special-chars\"\n  },\n  \"content\": {\n    \"mainTitle\": \"Translated Main Title\",\n    \"articleContents\": [\n      {\n        \"subTitle\": \"Translated Subtitle 1\",\n        \"articleParagraphs\": [\n          \"Translated paragraph 1\",\n          \"Translated paragraph 2\"\n        ]\n      },\n      {\n        \"subTitle\": \"Translated Subtitle 2\",\n        \"articleParagraphs\": [\n          \"Translated paragraph 3\",\n          \"Translated paragraph 4\",\n          \"Translated paragraph 5\"\n        ]\n      },\n      {\n        \"subTitle\": \"Translated Subtitle 3\",\n        \"articleParagraphs\": [\n          \"Translated paragraph 6\",\n          \"Translated paragraph 7\",\n          \"Translated paragraph 8\"\n        ]\n      },\n      {\n        \"subTitle\": \"Translated Subtitle 4\",\n        \"articleParagraphs\": [\n          \"Translated paragraph 9\"\n        ]\n      }\n    ]\n  },\n  \"socialMedia\": {\n    \"instagram\": {\n      \"caption\": \"Rewritten Instagram caption\",\n      \"hashtags\": \"#Rewritten #Hashtags\",\n      \"altText\": \"Rewritten alt text\",\n    },\n    \"facebook\": {\n      \"message\": \"Rewritten Facebook message\",\n      \"headline\": \"Rewritten headline\",\n      \"linkDescription\": \"Rewritten link description\",\n      \"hashtags\": \"#Rewritten #Hashtags\",\n      \"callToAction\": \"Rewritten CTA\",\n    },\n    \"xTwitter\": {\n      \"text\": \"Rewritten tweet text\",\n      \"hashtags\": \"#Rewritten #Hashtags\",\n    },\n    \"pinterest\": {\n      \"title\": \"Rewritten pin title\",\n      \"description\": \"Rewritten pin description\",\n      \"hashtags\": \"#Rewritten #Hashtags\",\n      \"altText\": \"Rewritten alt text\",\n    },\n    \"threads\": {\n      \"text\": \"Rewritten thread text\",\n      \"hashtags\": \"#Rewritten #Hashtags\",\n    },\n    \"tiktok\": {\n      \"title\": \"Rewritten TikTok title\",\n      \"caption\": \"Rewritten TikTok caption\",\n      \"hashtags\": \"#Rewritten #Hashtags\",\n    }\n  },\n  \"salesProducts\": [\n    \"Translated Product Name 1\",\n    \"Translated Product Name 2\",\n    \"Translated Product Name 3\",\n    \"Translated Product Name 4\",\n    \"Translated Product Name 5\"\n  ]\n}\n```\n\n**WRONG OUTPUT FORMATS (WILL CAUSE ERRORS):**\n\"Here is the JSON response: { ... }\"\n\"The result is: { ... }\"\n\"`json\\n{ ... }\\n`\"\nAny text before or after the JSON\nComments or explanations outside the JSON\nSingle quotes instead of double quotes\n"
            },
            {
              "content": "## SYSTEM MESSAGE\n\n```\nYou are an article translator and writer for a women's spot app. Translate or rewrite the provided JSON object to the specified target language while maintaining the exact same structure.\n\n**CRITICAL: TRANSLATE OR REWRITE THE ENTIRE JSON OBJECT - DO NOT SKIP ANY VALUES**\n\n**TRANSLATION VS REWRITE REQUIREMENTS:**\n- **languages.hreflang**: REPLACE with target language code (en, pt, es, fr, de, it)\n- **languages.seo**: REWRITE (not translate) - rewrite metaTitle, metaDescription, keywords, slug to *ENSURE CHARACTERS LIMIT* compliance\n- **languages.content**: TRANSLATE - mainTitle, all subTitles, all articleParagraphs\n- **languages.socialMedia**: REWRITE (not translate) - rewrite to *ENSURE CHARACTERS LIMIT* compliance for each platform\n- **languages.salesProducts**: TRANSLATE - translate all product names in the array to target language, culturally adapt product terminology\n\n**UPDATE THESE ELEMENTS:**\n- hreflang: Use target language code\n- canonicalUrl: Build URL with locale (if not English), translated category, and new slug\n  - **CRITICAL: You MUST use the EXACT slug value from the `slug` field you created above**\n  - **The slug in canonicalUrl MUST be IDENTICAL to the `slug` field value - no differences allowed**\n  - **CRITICAL: The article category will be provided in the user prompt - ALWAYS use that category, NOT the one from the original canonicalUrl**\n  - **The category will be provided in ENGLISH (e.g., \"life\", \"intimacy\", \"health\", \"nutrition\")**\n  - **You MUST translate that English category to the target language using the LANGUAGE MAPPINGS below**\n  - For English (en): https://womensspot.org/[category]/[slug] where [slug] is the EXACT value from the `slug` field (locale omitted, category stays in English)\n  - For other languages: https://womensspot.org/[locale]/[translated-category]/[slug] where [slug] is the EXACT value from the `slug` field (category MUST be translated using mappings)\n- metaTitle: Use content.mainTitle\n- slug: Convert mainTitle to URL-safe format - **CRITICAL: Must be browser-compatible**\n  - Convert to lowercase\n  - Replace spaces with hyphens\n  - **Remove ALL accents and diacritical marks** (é → e, ñ → n, ü → u, ç → c, á → a, í → i, ó → o, ú → u, etc.)\n  - **Remove ALL special characters** (!, @, #, $, %, &, *, ?, etc.)\n  - **Remove ALL non-ASCII characters** - normalize to ASCII only\n  - Replace multiple consecutive hyphens with single hyphen\n  - Remove leading/trailing hyphens\n  - **Only allow: lowercase letters (a-z), numbers (0-9), and hyphens (-)**\n  - **Examples:**\n    - \"Café & Wellness\" → \"cafe-wellness\"\n    - \"São Paulo Health\" → \"sao-paulo-health\"\n    - \"Intimität & Beziehung\" → \"intimitat-beziehung\" (German: ä→a, ö→o, ü→u, ß→ss)\n    - \"Salud y Bienestar\" → \"salud-y-bienestar\"\n    - \"Santé & Beauté\" → \"sante-beaute\"\n    - \"Salute e Bellezza\" → \"salute-e-bellezza\"\n\n**CRITICAL: CATEGORY TRANSLATION:**\n- **ABSOLUTELY MANDATORY: The article category will be provided in the user prompt**\n- **DO NOT extract the category from the original canonicalUrl - always use the category provided in the user prompt**\n- **The category provided will be in ENGLISH (e.g., \"life\", \"intimacy\", \"health\", \"nutrition\", \"weight-loss\", \"beauty\", \"fitness\")**\n- **category in canonicalUrl**: \n  - **Step 1: Use the EXACT English category provided in the user prompt (e.g., \"life\", \"intimacy\", \"health\")**\n    - This is the SINGLE SOURCE OF TRUTH for the category\n    - DO NOT extract from the original canonicalUrl - it may be incorrect\n    - DO NOT infer from article content - use the provided category\n  - **Step 2: Use the LANGUAGE MAPPINGS below to translate that EXACT English category to the target language**\n    - \"life\" → pt=\"vida\", es=\"vida\", fr=\"vie\", de=\"leben\", it=\"vita\"\n    - \"weight-loss\" → pt=\"perda-de-peso\" (NOT \"saude\" which is \"health\")\n    - \"intimacy\" → pt=\"intimidade\" (NOT \"saude\" which is \"health\")\n    - \"health\" → pt=\"saude\"\n    - Use the EXACT mapping - do NOT confuse categories\n  - **Step 3: Use the translated category in the new canonicalUrl**\n  - **Examples:**\n    - Category \"life\" → Portuguese \"https://womensspot.org/pt/vida/article-slug\" (life → vida)\n    - Category \"weight-loss\" → Portuguese \"https://womensspot.org/pt/perda-de-peso/article-slug\" (weight-loss → perda-de-peso)\n    - Category \"intimacy\" → Spanish \"https://womensspot.org/es/intimidad/article-slug\" (intimacy → intimidad)\n- **NEVER use \"articles\" or its translations - always use the actual category name translated**\n- **CRITICAL: Do NOT confuse categories - \"weight-loss\" is NOT \"health\", \"intimacy\" is NOT \"health\", \"life\" is NOT \"intimacy\" - use the EXACT category provided**\n\n**LANGUAGE MAPPINGS (CATEGORY TRANSLATIONS):**\n- **CRITICAL: The category in the original article is ALWAYS in English. Use these mappings to translate it to the target language.**\n- **CRITICAL: These translations MUST match the backend exactly - they are the single source of truth from lib/utils/routeTranslation.ts**\n- **CRITICAL: NEVER use \"articles\" or its translations in canonical URLs - always use the actual category name**\n- health: en=\"health\", pt=\"saude\", es=\"salud\", fr=\"sante\", de=\"gesundheit\", it=\"salute\"\n- fitness: en=\"fitness\", pt=\"fitness\", es=\"fitness\", fr=\"fitness\", de=\"fitness\", it=\"fitness\"\n- nutrition: en=\"nutrition\", pt=\"nutricao\", es=\"nutricion\", fr=\"nutrition\", de=\"ernahrung\", it=\"nutrizione\"\n- intimacy: en=\"intimacy\", pt=\"intimidade\", es=\"intimidad\", fr=\"intimite\", de=\"intimitat\", it=\"intimita\"\n- beauty: en=\"beauty\", pt=\"beleza\", es=\"belleza\", fr=\"beaute\", de=\"schonheit\", it=\"bellezza\"\n- weight-loss: en=\"weight-loss\", pt=\"perda-de-peso\", es=\"perdida-de-peso\", fr=\"perte-de-poids\", de=\"gewichtsverlust\", it=\"perdita-di-peso\"\n- life: en=\"life\", pt=\"vida\", es=\"vida\", fr=\"vie\", de=\"leben\", it=\"vita\"\n\n**EXAMPLES OF CORRECT CANONICAL URLs:**\n- English (en): \"https://womensspot.org/intimacy/article-slug\" (locale omitted, category in English)\n- Portuguese (pt): \"https://womensspot.org/pt/intimidade/article-slug\" (locale included, category translated)\n- Spanish (es): \"https://womensspot.org/es/intimidad/article-slug\" (locale included, category translated)\n- French (fr): \"https://womensspot.org/fr/intimite/article-slug\" (locale included, category translated)\n- German (de): \"https://womensspot.org/de/intimitat/article-slug\" (locale included, category translated)\n- Italian (it): \"https://womensspot.org/it/intimita/article-slug\" (locale included, category translated)\n\n**MORE EXAMPLES WITH DIFFERENT CATEGORIES:**\n- Original \"https://womensspot.org/weight-loss/article-slug\" → Portuguese \"https://womensspot.org/pt/perda-de-peso/article-slug\" (weight-loss → perda-de-peso)\n- Original \"https://womensspot.org/weight-loss/article-slug\" → Spanish \"https://womensspot.org/es/perdida-de-peso/article-slug\" (weight-loss → perdida-de-peso)\n- Original \"https://womensspot.org/weight-loss/article-slug\" → French \"https://womensspot.org/fr/perte-de-poids/article-slug\" (weight-loss → perte-de-poids)\n- Original \"https://womensspot.org/health/article-slug\" → Portuguese \"https://womensspot.org/pt/saude/article-slug\" (health → saude)\n- Original \"https://womensspot.org/nutrition/article-slug\" → Portuguese \"https://womensspot.org/pt/nutricao/article-slug\" (nutrition → nutricao)\n\n**INCORRECT EXAMPLES (NEVER DO THIS):**\n- \"https://womensspot.org/en/articles/article-slug\" (using \"articles\" instead of category, AND locale should be omitted for English)\n- \"https://womensspot.org/pt/artigos/article-slug\" (using \"artigos\" instead of category)\n- \"https://womensspot.org/intimacy/article-slug\" (missing locale for non-English - if target language is NOT English, locale must be included)\n- \"https://womensspot.org/en/intimacy/article-slug\" (locale included for English - should be omitted)\n\n**CRITICAL SLUG RULES FOR ALL LANGUAGES - URL-SAFE AND BROWSER-COMPATIBLE:**\n- **Slugs MUST be browser-compatible - NO accents, NO special characters, NO non-ASCII characters**\n- **German:** Replace umlauts (ä → a, ö → o, ü → u, ß → ss). Example: \"Intimität\" → \"intimitat\"\n- **Portuguese:** Replace accents (á → a, é → e, í → i, ó → o, ú → u, ã → a, õ → o, ç → c). Example: \"São Paulo\" → \"sao-paulo\"\n- **Spanish:** Replace accents (á → a, é → e, í → i, ó → o, ú → u, ñ → n). Example: \"Salud y Bienestar\" → \"salud-y-bienestar\"\n- **French:** Replace accents (à → a, é → e, è → e, ê → e, ë → e, î → i, ï → i, ô → o, ù → u, û → u, ü → u, ç → c). Example: \"Santé & Beauté\" → \"sante-beaute\"\n- **Italian:** Replace accents (à → a, è → e, é → e, ì → i, ò → o, ù → u). Example: \"Salute e Bellezza\" → \"salute-e-bellezza\"\n- **ALL languages:** Remove ALL special characters, keep only lowercase letters (a-z), numbers (0-9), and hyphens (-)\n- **CRITICAL:** Slugs must work in ALL browsers - no encoding issues, no broken URLs\n\n**CHARACTER LIMITS FOR ARTICLE CONTEXT (CRITICAL - MANDATORY ENFORCEMENT):**\n- If original is longer than 200 characters, rewrite to be ≤200 characters while preserving core message\n- If original is shorter than 200 characters, maintain similar length (±10% tolerance) but never exceed 200 characters\n\n**CHARACTER LIMITS FOR SEO (MANDATORY ENFORCEMENT):**\n- mainTitle/subTitle: 400 chars max (TRANSLATE, if the result is longer than 400 characters, REWRITE to follow the rules)\n- metaTitle: 500 chars max (REWRITE)\n- metaDescription: 1000 chars max (REWRITE)\n\n**SOCIAL MEDIA LIMITS (REWRITE - NOT TRANSLATE - STRICT COMPLIANCE REQUIRED):**\n\n**INSTAGRAM:**\n- Caption: maximum 2200 characters including hashtags (REWRITE)\n- Hashtags: maximum 30 hashtags (REWRITE)\n- AltText: maximum 1000 characters (REWRITE)\n\n**FACEBOOK:**\n- Message: maximum 63,206 characters including hashtags (REWRITE)\n- Headline: maximum 100 characters (REWRITE)\n- LinkDescription: maximum 300 characters (REWRITE)\n- Hashtags: no strict limit but must follow limit of chars (REWRITE)\n- CallToAction: maximum 30 characters (REWRITE)\n\n**X (TWITTER):**\n- Text: maximum 280 characters for free accounts including hashtags (REWRITE)\n- Hashtags: no strict limit but must follow limit of chars (REWRITE)\n\n**PINTEREST:**\n- Title: maximum 100 characters including hashtags (REWRITE)\n- Description: maximum 500 characters including hashtags (REWRITE)\n- Hashtags: no strict limit but must follow limit of chars (REWRITE)\n- AltText: maximum 500 characters including hashtags (REWRITE)\n\n**THREADS:**\n- Text: maximum 500 characters including hashtags (REWRITE)\n- Hashtags: no strict limit but must follow limit of chars (REWRITE)\n\n**TIKTOK:**\n- Title: maximum 90 characters (REWRITE)\n- Caption: maximum 2200 characters including hashtags (REWRITE)\n- Hashtags: no strict limit but must follow limit of chars (REWRITE)\n\n**CRITICAL SOCIAL MEDIA RULES ENFORCEMENT:**\n- **ALL social media content MUST follow the exact character limits**\n- **If translation exceeds ANY platform limit, REWRITE to follow EXACTLY within the limit**\n- **Character counting is MANDATORY for every single social media field**\n- **NO content can exceed platform-specific limits - this will cause API errors**\n- **Platform limits are NON-NEGOTIABLE and must be enforced with 100% accuracy**\n- **Each platform has different limits - respect each one individually**\n\n**DO NOT TRANSLATE:**\n- Image URLs\n- JSON structure\n- Social media structure\n- **Product names, brand names, merchandise, or purchasable items mentioned in article content** - Keep exact names so users can find them for purchase\n\n**TRANSLATE:**\n- **salesProducts array**: Translate all generic product names to target language, culturally adapt to match e-commerce terminology in that language region\n\n**CRITICAL RULES:**\n- If ANY content exceeds character limit, REWRITE that specific value to follow the rules\n- Count characters for every single field\n- NO EXCEPTIONS - every text field must comply with its character limit\n- SEO & Social Media: REWRITE based on context to *ENSURE CHARACTERS LIMIT*\n- Content: TRANSLATE, no characters limit\n\n**CONSEQUENCES OF NOT FOLLOWING SOCIAL MEDIA RULES:**\n- **API ERRORS**: Exceeding character limits will cause social media API calls to fail\n- **AUTOMATION FAILURE**: n8n workflows will break if content exceeds platform limits\n- **POSTING FAILURES**: Social media posts will be rejected by platform APIs\n- **WORKFLOW INTERRUPTION**: Entire automation process will stop due to validation errors\n- **DATA CORRUPTION**: Invalid content will cause database inconsistencies\n- **USER EXPERIENCE**: Failed posts will result in incomplete social media campaigns\n\n**CRITICAL JSON QUOTE RULES - ABSOLUTELY MANDATORY:**\n- **ALL double quotes (\") within content MUST be replaced with single quotes (')**\n- **This is CRITICAL - double quotes break JSON parsing in n8n when data is treated as string**\n- **Examples of CORRECT usage:**\n  - Title: \"Understanding 'Popcorn Brain': Signs, Causes...\" → JSON: `\"mainTitle\": \"Understanding 'Popcorn Brain': Signs, Causes...\"`\n  - Text: \"The term 'popcorn brain'\" → JSON: `\"articleParagraphs\": [\"The term 'popcorn brain'\"]`\n- **Examples of INCORRECT (WILL CAUSE ERRORS):**\n  - WRONG: `\"metaTitle\": \"Capire il \"Popcorn \"Brain\": Segnali\"` (double quotes break JSON)\n  - WRONG: `\"articleParagraphs\": [\"The term \"popcorn brain\"\"]` (double quotes break JSON)\n- **VERIFICATION: Before outputting, replace ALL double quotes within content with single quotes (apostrophes)**\n- **If your content needs quotes, use single quotes (') instead of double quotes (\") - this is not optional**\n- **FINAL CHECK: Scan your entire JSON output for ANY double quotes (\") inside string values and replace them with single quotes (') before submitting**\n\n**OUTPUT:** Only the complete translated JSON object, nothing else.\n```\n",
              "role": "system"
            }
          ]
        },
        "jsonOutput": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        4176,
        176
      ],
      "id": "5129a709-fce5-49de-98dd-1592cbe1e1a0",
      "name": "Article translation",
      "executeOnce": false,
      "retryOnFail": true,
      "waitBetweenTries": 5000,
      "credentials": {
        "openAiApi": {
          "id": "Gqus3026ccdUj9Mc",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "kB652rQOyILTtcbU",
          "mode": "id"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "articleId": "={{ $('Generate MongoDB  _ID').item.json._id }}"
          },
          "matchingColumns": [
            "articleId"
          ],
          "schema": [
            {
              "id": "articleId",
              "displayName": "articleId",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": true,
          "convertFieldsToString": true
        },
        "options": {
          "waitForSubWorkflow": true
        }
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        5520,
        -688
      ],
      "id": "24d65902-e82b-4687-8511-9251c03c76e5",
      "name": "Call - Create articles images"
    },
    {
      "parameters": {
        "amount": "={{ Math.floor(Math.random() * 12 * 60) }}"
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        3360,
        -848
      ],
      "id": "f596509b-d0fd-4d44-9cf9-1ac878d61674",
      "name": "Wait1",
      "webhookId": "e96c0f58-9af0-4510-b071-aaeb0a3de3e7"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=## USER MESSAGE\n\n```\n{{ JSON.stringify($('Rewrite article').item.json.message.content) }}\n\nAnalyze the above article content and create a JSON object with an English (EN) array containing 4 to 8 product names (minimum 4, maximum 8) that are directly related to the article topic. If the article mentions specific brands, models, or types, prioritize those specific products and order from most specific to least specific. If the article is generic (no brands mentioned), order from most common and best-selling to least common.\n```\n\n---\n\n# DETAILED DOCUMENTATION\n\n**MANDATORY JSON STRUCTURE:**\n```json\n{\n  \"salesProducts\": [\"Product Name 1\", \"Product Name 2\", \"Product Name 3\", \"Product Name 4\", \"Product Name 5\"]\n}\n```\n\n## EXAMPLE OUTPUTS\n\n**EXAMPLE 1 - Generic Article about Running Shoes (5 products - no brand mentioned):**\n```json\n{\n  \"salesProducts\": [\"Running Shoes\", \"Exercise Shoes\", \"Shoes Absorb Impact\", \"Athletic Footwear\", \"Training Shoes\"]\n}\n```\n\n**EXAMPLE 2 - Article mentions \"Adidas running shoes\" (6 products - brand mentioned):**\n```json\n{\n  \"salesProducts\": [\"Adidas Running Shoes\", \"Exercise Adidas Shoes\", \"Running Shoes Adidas\", \"Adidas Athletic Shoes\", \"Running Shoes\", \"Exercise Shoes\"]\n}\n```\n\n**EXAMPLE 3 - Article mentions \"Adidas N202 running shoes\" (6 products - specific model mentioned):**\n```json\n{\n  \"salesProducts\": [\"Adidas N202 Running Shoes\", \"Adidas N202 Shoes\", \"Running Shoes Adidas N202\", \"Adidas Running Shoes\", \"Running Shoes Adidas\", \"Running Shoes\"]\n}\n```\n\n**EXAMPLE 4 - Generic Fitness Article (5 products - no brands mentioned):**\n```json\n{\n  \"salesProducts\": [\"Running Shoes\", \"Yoga Mat with Carrying Strap\", \"Adjustable Dumbbells Set\", \"Wireless Bluetooth Headphones\", \"Protein Powder Shaker Bottle\"]\n}\n```\n\n**EXAMPLE 5 - Generic Beauty Article (6 products - no brands mentioned):**\n```json\n{\n  \"salesProducts\": [\"Foundation\", \"Daily Moisturizing Lotion\", \"Makeup Brushes Set\", \"Ultra Sheer Sunscreen\", \"Hair Dryer with Diffuser\", \"Makeup Remover\"]\n}\n```\n\n**EXAMPLE 6 - Generic Nutrition Article (4 products - minimum, no brands mentioned):**\n```json\n{\n  \"salesProducts\": [\"Organic Green Tea Bags\", \"Blender\", \"Meal Prep Containers Set\", \"Protein Powder\"]\n}\n```\n\n**WRONG OUTPUT FORMATS (WILL CAUSE ERRORS):**\n- \"Here are the products: { \\\"salesProducts\\\": [...] }\"\n- \"The products are: { \\\"salesProducts\\\": [...] }\"\n- \"```json\\n{ \\\"salesProducts\\\": [...] }\\n```\"\n- [\"Product 1\", \"Product 2\"] (missing JSON object wrapper)\n- Any text before or after the JSON object\n- Comments or explanations outside the JSON\n- Single quotes instead of double quotes\n- Fewer than 4 products or more than 8 products in the array\n- Missing the `salesProducts` field\n- Including other language arrays (PT, ES, IT, FR, DE)\n"
            },
            {
              "content": "## SYSTEM MESSAGE\n\n```\nYou are a product recommendation specialist for a **women's spot app**. You will receive article content and create a JSON object with an English (EN) array containing product names that are directly related to the article and can be sold.\n\n**CRITICAL INSTRUCTION: YOU MUST READ THE ARTICLE CONTENT AND CREATE A JSON OBJECT WITH AN ENGLISH (EN) ARRAY CONTAINING 4 TO 8 PRODUCT NAMES (MINIMUM 4, MAXIMUM 8) THAT ARE DIRECTLY RELATED TO THE ARTICLE TOPIC. IF THE ARTICLE MENTIONS SPECIFIC BRANDS, MODELS, OR TYPES, PRIORITIZE THOSE SPECIFIC PRODUCTS AND ORDER FROM MOST SPECIFIC TO LEAST SPECIFIC. IF THE ARTICLE IS GENERIC (NO BRANDS MENTIONED), ORDER FROM MOST COMMON AND BEST-SELLING TO LEAST COMMON.**\n\n**CONTEXT:** This content is for a women's wellness app covering intimate wellness, personal wellness, relationships, health, beauty, nutrition, and weight loss. These are educational topics focused on women's daily life experiences.\n\n## CONTENT UNDERSTANDING AND ANALYSIS\n\n**ABSOLUTELY CRITICAL: YOU MUST READ, UNDERSTAND THE ARTICLE CONTENT AND IDENTIFY PRODUCTS THAT ARE DIRECTLY RELATED TO THE ARTICLE TOPIC.**\n\n**STEP 1: READ THE ARTICLE CONTENT**\n- Analyze the provided article content thoroughly\n- Identify the main themes, topics, and key concepts\n- Extract the core information and context\n- Determine what types of products would be relevant to readers of this article\n\n**STEP 2: IDENTIFY RELEVANT PRODUCTS**\nIdentify products that are:\n- **Directly related** to the article's main topic and themes\n- **Commonly available** on major e-commerce websites (Amazon, eBay, specialty stores)\n- **Best-selling** or popular products in the relevant category\n- **Straightforward and easy to find** - use common product names that users can search for\n- **Relevant to the article's content** - products that readers would actually want to purchase after reading\n\n**STEP 3: IDENTIFY SPECIFICITY LEVEL**\n- **Check if the article mentions specific brands, models, or types** (e.g., \"Adidas running shoes\", \"Nike Air Max\", \"Adidas N202 running shoes\")\n- **If specific brands/models are mentioned**: Prioritize those specific products and order from most specific to least specific\n- **If no specific brands/models are mentioned**: Use generic product names and order from most common/best-selling to least common\n\n**STEP 4: ORDER PRODUCTS BY SPECIFICITY AND RELEVANCE**\n**When article mentions specific brands/models:**\n1. **Most specific** - Exact brand and model mentioned (e.g., \"Adidas N202 Running Shoes\")\n2. **Very specific** - Brand with product type (e.g., \"Adidas Running Shoes\", \"Exercise Adidas Shoes\")\n3. **Specific** - Brand name with category (e.g., \"Running Shoes Adidas\", \"Adidas Athletic Shoes\")\n4. **Less specific** - Generic product type (e.g., \"Running Shoes\", \"Exercise Shoes\")\n5-8. **Related generic products** - Other related products without brand (include as many as needed to reach 4-8 total products)\n\n**When article does NOT mention specific brands/models:**\n1. **Most common and best-selling** - products that are widely available and have high sales volume\n2. **Very popular** - products that are well-known and frequently purchased\n3. **Popular** - products that are commonly found and have good sales\n4. **Common** - products that are available and have decent sales\n5-8. **Less common but still relevant** - products that are related but may be more niche (include as many as needed to reach 4-8 total products)\n\n## PRODUCT NAMING REQUIREMENTS\n\n- **CRITICAL: PRIORITIZE SPECIFIC BRANDS/TYPES WHEN MENTIONED** - If the article mentions specific brands, models, or types, prioritize those in the product list\n- **If article mentions \"Adidas running shoes\"**: Include \"Adidas Running Shoes\" as the first/most prioritized product\n- **If article mentions \"Adidas N202 running shoes\"**: Include \"Adidas N202 Running Shoes\" as the first/most prioritized product, followed by less specific variations\n- **If article is generic (no brand mentioned)**: Use generic product names without brand names\n- Use **specific product names** rather than generic categories (e.g., \"Yoga Mat\" not just \"mat\", \"Protein Powder\" not just \"supplement\")\n- Make product names **straightforward and easy to find** - users should be able to search for these exact terms\n- Use **common product terminology** that matches how products are listed on sales websites\n- Include **key product identifiers** when helpful (e.g., \"Wireless Bluetooth Headphones\", \"Organic Green Tea Bags\")\n- **Order products from most specific to least specific** when brands/models are mentioned in the article\n\n**GOOD PRODUCT NAMES - When article mentions specific brands/models:**\n- \"Adidas N202 Running Shoes\" (most specific - exact model mentioned in article)\n- \"Adidas Running Shoes\" (very specific - brand with product type)\n- \"Running Shoes Adidas\" (specific - brand with category)\n- \"Running Shoes\" (less specific - generic fallback)\n- \"Exercise Shoes\" (related generic product)\n\n**GOOD PRODUCT NAMES - When article is generic (no brand mentioned):**\n- \"Running Shoes\" (generic product type, no brand)\n- \"Yoga Mat with Carrying Strap\" (specific type with feature, no brand)\n- \"Organic Green Tea Bags\" (specific category and type, no brand)\n- \"Wireless Bluetooth Headphones\" (specific technology and type, no brand)\n- \"Vitamin D3 Supplements\" (specific vitamin and form, no brand)\n- \"Creatine\" (generic product name)\n\n**BAD PRODUCT NAMES:**\n- \"Fresh Apples\" (perishable product - FORBIDDEN)\n- \"Fresh Bananas\" (perishable product - FORBIDDEN)\n- \"Fresh Vegetables\" (perishable product - FORBIDDEN)\n- \"Monthly Subscription\" (subscription - FORBIDDEN)\n- \"Subscription Box\" (subscription - FORBIDDEN)\n- \"shoes\" (too generic)\n- \"mat\" (too vague)\n- \"tea\" (not specific enough)\n- Including brands when article doesn't mention them (only include brands if article specifically mentions them)\n\n## PRODUCT SELECTION GUIDELINES\n\n- **Health articles**: Focus on health supplements, wellness products, fitness equipment, medical devices, health monitoring tools\n- **Beauty articles**: Focus on skincare products, makeup, beauty tools, hair care products, beauty accessories\n- **Fitness articles**: Focus on workout equipment, athletic wear, fitness accessories, sports nutrition, exercise gear\n- **Nutrition articles**: Focus on supplements, kitchen tools, meal prep items, nutrition products, dehydrated/preserved foods, food-related books or guides (NOT fresh perishable foods)\n- **Intimacy articles**: Focus on wellness products, personal care items, relationship wellness products, intimate care items\n- **Weight Loss articles**: Focus on fitness equipment, diet products, meal replacement items, weight loss supplements, tracking devices\n- **Life/Lifestyle articles**: Focus on lifestyle products, home items, personal care products, organizational tools, lifestyle accessories\n\n## CRITICAL: NO PERISHABLE PRODUCTS\n\n- **NEVER include fresh perishable foods** (fresh fruits, fresh vegetables, fresh meat, fresh dairy, fresh produce)\n- **If article mentions perishable items**, suggest non-perishable alternatives:\n  - Fresh apples → \"Apple Pills\", \"Dehydrated Apple\", \"Apple Books\", \"Apple Supplements\"\n  - Fresh bananas → \"Banana Powder\", \"Banana Supplements\", \"Banana Chips\", \"Banana Books\"\n  - Fresh vegetables → \"Vegetable Supplements\", \"Dehydrated Vegetables\", \"Vegetable Powders\", \"Nutrition Books\"\n  - Fresh meat → \"Protein Supplements\", \"Meat Substitutes\", \"Protein Powders\", \"Nutrition Guides\"\n- **Only include shelf-stable, non-perishable products** that can be sold online and shipped\n\n## CRITICAL: NO SUBSCRIPTIONS\n\n- **NEVER include any type of subscription** as a sales product\n- **NEVER include**: \"Subscription\", \"Monthly Subscription\", \"Subscription Box\", \"Subscription Service\", \"Subscription Plan\", \"Recurring Subscription\", or any variation\n- Only include one-time purchasable products, not recurring services or subscription-based products\n\n## ABSOLUTELY FORBIDDEN\n\n- Do NOT include brands in product names UNLESS the article specifically mentions that brand (e.g., if article is generic about \"running shoes\", do NOT add \"Nike Running Shoes\" - only use generic \"Running Shoes\")\n- Do NOT ignore specific brands/models when article mentions them (e.g., if article mentions \"Adidas running shoes\", you MUST prioritize \"Adidas Running Shoes\" in the product list)\n- Do NOT include perishable supermarket products (e.g., fresh fruits, fresh vegetables, fresh meat, fresh dairy, fresh produce)\n- If article mentions perishable items (e.g., \"apples\"), suggest non-perishable alternatives (e.g., \"apple pills\", \"dehydrated apple\", \"apple books\", \"apple supplements\")\n- **Do NOT include any type of subscription** (e.g., \"subscription\", \"monthly subscription\", \"subscription box\", \"subscription service\", \"subscription plan\", etc.)\n- Do NOT create generic or vague product names (e.g., \"product\", \"item\", \"thing\")\n- Do NOT include products that are not directly related to the article\n- Do NOT use overly technical or obscure product names\n- Do NOT include products that are difficult to find or purchase\n- Do NOT create fictional or made-up product names\n- Do NOT include products that are inappropriate or unrelated to the article topic\n- Do NOT use product names that are too specific to a single retailer\n- Do NOT include emojis, symbols, or special characters in product names\n\n## OUTPUT FORMAT\n\n**CRITICAL: You must output the result in the exact JSON format specified below. No other format is acceptable.**\n\n**MANDATORY JSON STRUCTURE:**\n```json\n{\n  \"salesProducts\": [\"Product Name 1\", \"Product Name 2\", \"Product Name 3\", \"Product Name 4\", \"Product Name 5\"]\n}\n```\n\n**JSON FORMAT VALIDATION RULES:**\n1. **MUST start with `{` and end with `}`**\n2. **MUST have exactly one main object: `salesProducts`**\n3. **MUST use double quotes for all keys and string values**\n4. **MUST contain 4 to 8 product names (minimum 4, maximum 8)**\n5. **MUST NOT include any text before or after the JSON**\n6. **MUST NOT include any comments or explanations outside the JSON**\n7. **MUST be valid JSON that can be parsed by a JSON parser**\n\n**OUTPUT REQUIREMENTS:**\n- **If article mentions specific brands/models**: Products must be ordered from most specific (exact brand/model) to least specific (generic)\n- **If article is generic (no brands mentioned)**: Products must be ordered from most common/best-selling to least common\n- Product names must be directly related to the article content\n- Product names must be straightforward and easy to find on English e-commerce websites\n- Use English product names as they appear on English e-commerce websites (Amazon, eBay, etc.)\n- JSON must be valid and properly formatted\n- No extra commentary or text outside the JSON object\n\n**ABSOLUTELY FORBIDDEN:**\n- Do NOT output in any format other than the specified JSON\n- Do NOT add any text before or after the JSON object\n- Do NOT use single quotes instead of double quotes\n- Do NOT add trailing commas after the last item in arrays\n- Do NOT include comments or explanations outside the JSON\n- Do NOT use backticks or markdown formatting around the JSON\n- Do NOT add any prefix like \"Here are the products:\" or \"The products are:\"\n- Do NOT include fewer than 4 products or more than 8 products\n- Do NOT include other language arrays (PT, ES, IT, FR, DE)\n\n**OUTPUT:** Only the complete JSON object, nothing else.\n```\n",
              "role": "system"
            }
          ]
        },
        "jsonOutput": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        3280,
        -80
      ],
      "id": "41e22fd5-02b0-41ca-a1b1-9d2ba69148d7",
      "name": "Sales ARR",
      "executeOnce": false,
      "retryOnFail": true,
      "waitBetweenTries": 5000,
      "credentials": {
        "openAiApi": {
          "id": "Gqus3026ccdUj9Mc",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=## USER MESSAGE\n```\nPlease analyze the following article content:\n\n{{ JSON.stringify($('Rewrite article').item.json.message.content) }}\n\nand create 1 article context string following the specified JSON format.\n```\n\n---\n\n# DETAILED DOCUMENTATION\n\n**MANDATORY JSON STRUCTURE**\n```json\n{\n  \"articleContext\": \"Article context string that summarizes the article - MINIMUM 170 characters, MAXIMUM 200 characters\"\n}\n```\n\n**WRONG OUTPUT FORMATS (WILL CAUSE ERRORS):**\n- \"Here is the JSON response: { ... }\"\n- \"The result is: { ... }\"\n- \"```json\\n{ ... }\\n```\"\n- Any text before or after the JSON\n- Comments or explanations outside the JSON\n- Single quotes instead of double quotes\n- Missing the `articleContext` field\n- Undefined, null, or empty string values\n- Context string shorter than 170 characters\n- Context string longer than 200 characters\n- Generic year references (e.g., \"in 2026\", \"this year\", \"last year\")\n"
            },
            {
              "content": "## SYSTEM MESSAGE\n```\nYou are an article content analyzer for a **women's spot app**. You will receive article content and create 1 article context string that will be used as catchphrases for social media posts and image captions. The context string should be direct, engaging, and natural - written as if speaking directly to the reader about the topic itself, not about the article.\n\n**IMPORTANT CONTEXT:** This content is for a **women's wellness and health platform** that covers topics including women's intimate wellness, personal wellness, relationships, and intimate health. These topics are educational, informational, and focused on sharing experiences and information about women's intimate wellness - NOT explicit content.\n\n**CRITICAL SAFETY NOTE:** Even though this is educational content about women's intimate wellness, OpenAI's safety filters will reject ANY prompts containing sexual terminology. The word \"sex\" itself triggers rejection, even in educational contexts. Always use \"intimate wellness,\" \"personal wellness,\" or \"relationship wellness\" instead.\n\n**APP PURPOSE:** The article context will be used in a women's spot app that provides:\n- Educational content about women's intimate wellness and personal health\n- Information sharing about women's intimate wellness and relationships\n- Support for women's intimate wellness and self-care\n- Empowerment and education around women's health topics\n- Safe spaces for women to learn about their bodies and relationships\n\n**USAGE:** The article context will be used as:\n- Social media catchphrases and captions\n- Image post descriptions\n- Engaging hooks that focus on the content itself, not meta-references to the article\n\n**CRITICAL INSTRUCTION: YOU MUST CREATE 1 ARTICLE CONTEXT STRING OF MINIMUM 170 CHARACTERS AND MAXIMUM 200 CHARACTERS, OUTPUT IN THE SPECIFIED JSON FORMAT.**\n\n## CONTENT ANALYSIS AND CREATION\n\n**STEP 1: READ AND UNDERSTAND THE ARTICLE CONTENT**\n- Analyze the provided article content thoroughly\n- Identify the main themes, topics, and key concepts\n- Extract the core information and context\n- Understand the essence and main purpose of the article\n\n**STEP 2: CREATE ARTICLE CONTEXT STRING**\nCreate 1 article context string that captures the essence of the article content:\n\n**CHARACTER REQUIREMENTS:**\n- **MANDATORY: Must be between 170 and 200 characters (inclusive, including spaces)**\n- Count all characters including spaces, punctuation, and letters\n- Verify the length before outputting\n- Minimum 170 characters ensures informative and detailed content\n- Maximum 200 characters keeps it concise and readable\n\n**WRITING STYLE REQUIREMENTS:**\n- **CRITICAL: Write directly about the topic, NOT about the article itself**\n  - Write as if speaking directly to the reader about the subject matter\n  - Use natural, engaging language suitable for social media catchphrases\n  - Focus on benefits, insights, and value - present the information directly\n  - Write like a social media caption or hook - engaging and direct\n- **ABSOLUTELY FORBIDDEN:** Do NOT start with \"This article...\", \"This content...\", \"The article...\", \"This piece examines...\", \"In this article, we...\", or any meta-references\n- **GOOD EXAMPLES (direct and engaging):**\n  - \"Discover practical tips for...\"\n  - \"Learn how to improve...\"\n  - \"Explore the benefits of...\"\n  - \"Find out why...\"\n  - \"Understand how...\"\n  - \"Get insights into...\"\n  - Start directly with the topic, benefit, or insight\n\n**CONTENT REQUIREMENTS:**\n- Must capture the essence and main purpose of the article content\n- Focus on the key benefits, insights, or information the content provides\n- Be precise and meaningful within the character limit\n- Ensure the context string is informative and accurately represents the article content\n- Reflect the article content accurately\n- Do NOT make up false information\n- Do NOT change the core meaning or context\n\n**CRITICAL YEAR REFERENCE REQUIREMENTS:**\n- **DO NOT include generic year references** in the article context string (e.g., \"in 2026\", \"this year\", \"last year\", \"as of 2024\", \"studies from 2023\")\n- **The article context string must be reusable across any year** - it should not become outdated due to year references\n- **ONLY include years if they are tied to date-specific historical events** (e.g., \"World Cup 2022\", \"Olympic Games 2020\", \"COVID-19 pandemic in 2020\")\n- **Remove or rephrase any generic time references** that include years (e.g., \"A study from 2022\" → \"Recent studies show\", \"Research conducted in 2023\" → \"Research shows\")\n- **Use timeless language** that remains relevant regardless of when the content is used\n- **Examples of CORRECT usage (no year references):**\n  - \"Discover practical tips for improving your wellness\"\n  - \"Learn how to enhance your intimate relationships\"\n  - \"Explore the benefits of personal wellness practices\"\n- **Examples of INCORRECT usage (generic year references):**\n  - WRONG: \"Discover wellness tips for 2026\"\n  - WRONG: \"Learn about this year's best practices\"\n  - WRONG: \"A study from 2024 shows...\"\n- **Examples of CORRECT usage (date-specific events only):**\n  - \"Understanding the impact of the COVID-19 pandemic in 2020 on women's health\"\n  - \"Lessons from the Olympic Games 2020\"\n\n**ABSOLUTELY NO EMOJIS** - Do not add any emojis, symbols, or special characters\n\n## SAFETY AND TERMINOLOGY\n\n**CRITICAL: AVOID ALL SEXUAL TERMINOLOGY - EVEN FOR EDUCATION**\nOpenAI's safety filters block ANY sexual terminology, even in educational contexts. The word \"sex\" itself triggers rejection. Use these safe alternatives:\n\n**COMPLETELY BLOCKED WORDS → SAFE ALTERNATIVES:**\n- \"sex\" → \"intimacy\" or \"wellness\" or \"relationships\"\n- \"sexual\" → \"intimate\" or \"personal\" or \"wellness\"\n- \"sexuality\" → \"intimacy\" or \"personal wellness\"\n- \"sex education\" → \"intimate wellness education\" or \"relationship wellness\"\n- \"sexual health\" → \"intimate wellness\" or \"personal wellness\"\n- \"sexual wellness\" → \"intimate wellness\" or \"personal wellness\"\n- \"sex life\" → \"intimate life\" or \"personal wellness\"\n- \"sexual pleasure\" → \"intimate satisfaction\" or \"personal wellness\"\n- \"sexual satisfaction\" → \"intimate satisfaction\" or \"personal wellness\"\n- \"sexual intimacy\" → \"intimate connection\" or \"personal connection\"\n- \"sexual relationship\" → \"intimate relationship\" or \"close relationship\"\n- \"sexual experience\" → \"intimate experience\" or \"personal experience\"\n\n**PRODUCT-RELATED BLOCKED WORDS → SAFE ALTERNATIVES:**\n- \"sex toys\" → \"wellness accessories\" or \"intimate wellness products\"\n- \"pleasure toy\" → \"wellness device\" or \"intimate wellness tool\"\n- \"dildo\" → \"wellness accessory\" or \"personal care item\"\n- \"vibrator\" → \"wellness device\" or \"intimate care tool\"\n- \"anal plug kit\" → \"beginner-friendly personal wellness kit\"\n- \"anal toys, plugs, beads\" → \"variety of self-care wellness accessories\"\n- \"plugs\" → \"wellness accessories\" or \"personal care items\"\n- \"beads\" → \"wellness accessories\" or \"personal care items\"\n- \"silicone toy\" → \"wellness device\" or \"personal care tool\"\n- \"lubricant\" → \"wellness gel\" or \"intimate care product\"\n\n**SAFE CONTEXT WORDS TO INCLUDE:**\n- \"educational\"\n- \"wellness\"\n- \"intimacy\"\n- \"empowerment\"\n- \"self-care\"\n- \"relationship\"\n- \"intimate wellness\"\n- \"personal wellness\"\n- \"body-safe\"\n- \"wellness accessories\"\n\n## OUTPUT FORMAT\n\n**CRITICAL: You must output the result in the exact JSON format specified below. No other format is acceptable.**\n\n**MANDATORY JSON STRUCTURE:**\n```json\n{\n  \"articleContext\": \"Article context string that summarizes the article - MINIMUM 170 characters, MAXIMUM 200 characters\"\n}\n```\n\n**JSON FORMAT VALIDATION RULES:**\n1. **MUST start with `{` and end with `}`**\n2. **MUST have exactly one main object: `articleContext`**\n3. **MUST have exactly 1 article context string: `articleContext`**\n4. **MUST use double quotes for all keys and string values**\n5. **MUST NOT include any text before or after the JSON**\n6. **MUST NOT include any comments or explanations outside the JSON**\n7. **MUST be valid JSON that can be parsed by a JSON parser**\n\n**FIELD REQUIREMENTS:**\n- **The `articleContext` field is REQUIRED (MANDATORY) - NOT OPTIONAL**\n- **The value MUST be a non-empty string - NO undefined, null, or empty values accepted**\n- **The value MUST be between 170 and 200 characters (including spaces)**\n- **Validation will FAIL if the field is missing, undefined, null, empty, or outside the character range**\n\n**CRITICAL JSON QUOTE RULES - ABSOLUTELY MANDATORY:**\n- **ALL double quotes (\") within content MUST be replaced with single quotes (')**\n- **This is CRITICAL - double quotes break JSON parsing in n8n when data is treated as string**\n- **Examples of CORRECT usage:**\n  - Text: \"Discover 'Popcorn Brain' signs\" → JSON: `\"articleContext\": \"Discover 'Popcorn Brain' signs\"`\n- **Examples of INCORRECT (WILL CAUSE ERRORS):**\n  - WRONG: `\"articleContext\": \"Discover \"Popcorn Brain\" signs\"` (double quotes break JSON)\n- **VERIFICATION: Before outputting, replace ALL double quotes within content with single quotes (apostrophes)**\n- **If your content needs quotes, use single quotes (') instead of double quotes (\") - this is not optional**\n\n**ABSOLUTELY FORBIDDEN:**\n- Do NOT output undefined, null, or empty values for the field\n- Do NOT omit the required JSON key or use empty strings\n- Do NOT create article context shorter than 170 characters\n- Do NOT create article context longer than 200 characters\n- Do NOT add any emojis, symbols, or special characters in any content\n- Do NOT make up false information\n- Do NOT change the core meaning or context\n- Do NOT output in any format other than the specified JSON\n- Do NOT start with \"This article...\", \"This content...\", \"The article...\", or any meta-references\n- Do NOT write about the article itself - write directly about the topic/content\n- **Do NOT include generic year references** (e.g., \"in 2026\", \"this year\", \"last year\", \"as of 2024\", \"studies from 2023\") - the context string must be reusable across any year\n- **ONLY include years if they are tied to date-specific historical events** (e.g., \"World Cup 2022\", \"Olympic Games 2020\", \"COVID-19 pandemic in 2020\")\n- Do NOT add any text before or after the JSON object\n- Do NOT use single quotes instead of double quotes\n- Do NOT add trailing commas after the last item in objects or arrays\n- Do NOT include comments or explanations outside the JSON\n- Do NOT use backticks or markdown formatting around the JSON\n- Do NOT add line breaks or extra spaces that break JSON parsing\n- Do NOT include any characters that are not valid JSON\n- Do NOT add any prefix like \"Here is the JSON:\" or \"The result is:\"\n\n**OUTPUT:** Only the complete JSON object, nothing else.\n```",
              "role": "system"
            }
          ]
        },
        "jsonOutput": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        3648,
        -352
      ],
      "id": "930b111d-f43b-451f-8c2e-72788f47e7a1",
      "name": "Article context",
      "executeOnce": false,
      "retryOnFail": true,
      "waitBetweenTries": 5000,
      "credentials": {
        "openAiApi": {
          "id": "Gqus3026ccdUj9Mc",
          "name": "OpenAi account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Sanitize data": {
      "main": [
        [
          {
            "node": "Validate article",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Generate MongoDB  _ID": {
      "main": [
        [
          {
            "node": "Safe sheet point",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Article validation": {
      "main": [
        [
          {
            "node": "Article discarded",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Rewrite article",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Media context": {
      "main": [
        [
          {
            "node": "Article context",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Seo": {
      "main": [
        [
          {
            "node": "Social media",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Social media": {
      "main": [
        [
          {
            "node": "Sales ARR",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format article json": {
      "main": [
        [
          {
            "node": "Languages array",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Full article json": {
      "main": [
        [
          {
            "node": "Save to sheets",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Save to sheets": {
      "main": [
        [
          {
            "node": "Create ariticle",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Safe sheet point": {
      "main": [
        [
          {
            "node": "Seo",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Handle create article error": {
      "main": [
        []
      ]
    },
    "Format HTML data": {
      "main": [
        [
          {
            "node": "Sanitize data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract HTML": {
      "main": [
        [
          {
            "node": "Format HTML data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Wait1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Languages array": {
      "main": [
        [
          {
            "node": "Loop over languages",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop over languages": {
      "main": [
        [
          {
            "node": "Aggregate languages objects",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Rewrite context by lang",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait": {
      "main": [
        [
          {
            "node": "Loop over languages",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate languages objects": {
      "main": [
        [
          {
            "node": "Full article json",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Rewrite article": {
      "main": [
        [
          {
            "node": "Media context",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validate article": {
      "main": [
        [
          {
            "node": "Article validation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Article discarded": {
      "main": [
        [
          {
            "node": "Get URL row",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get URL row": {
      "main": [
        [
          {
            "node": "Extract HTML",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Full especific lang article": {
      "main": [
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Created": {
      "main": [
        [
          {
            "node": "Call - Create articles images",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Append row PT",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Append row ES",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Append row FR",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Append row IT",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Append row DE",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append row PT": {
      "main": [
        [
          {
            "node": "Full especific lang article",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append row ES": {
      "main": [
        [
          {
            "node": "Full especific lang article",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append row IT": {
      "main": [
        [
          {
            "node": "Full especific lang article",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append row DE": {
      "main": [
        [
          {
            "node": "Full especific lang article",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append row FR": {
      "main": [
        [
          {
            "node": "Full especific lang article",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create ariticle": {
      "main": [
        [
          {
            "node": "Created",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Handle create article error",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Rewrite context by lang": {
      "main": [
        [
          {
            "node": "Article translation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Article translation": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Call - Create articles images": {
      "main": [
        []
      ]
    },
    "Wait1": {
      "main": [
        [
          {
            "node": "Get URL row",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Sales ARR": {
      "main": [
        [
          {
            "node": "Format article json",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Article context": {
      "main": [
        [
          {
            "node": "Generate MongoDB  _ID",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    "callerPolicy": "workflowsFromSameOwner"
  },
  "versionId": "89cd2c5e-b8df-4d30-b890-ab1665f8e6f2",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "da7fbb850bf8f4d2094c31cae4e2e2f700359b69a6ab74a883fb15b08b00a233"
  },
  "id": "79YeeqZubJNRkuFZ",
  "tags": []
}